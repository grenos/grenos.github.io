fixupMouse=(e=>{return{event:e=e||window.event,target:e.target?e.target:e.srcElement,which:e.which?e.which:1===e.button?1:2===e.button?3:4===e.button?2:1,x:e.x?e.x:e.clientX,y:e.y?e.y:e.clientY}});const movie=new Movie,ui=new UI;var player;function loadYTplayer(){player=new YT.Player("trailer-player")}function slickReady(){$(".print-slick").slick({infinite:!0,slidesToShow:7,slidesToScroll:7,arrows:!0,dragable:!0,responsive:[{breakpoint:1921,settings:{slidesToShow:10,slidesToScroll:10}},{breakpoint:1621,settings:{slidesToShow:8,slidesToScroll:8}},{breakpoint:1376,settings:{slidesToShow:7,slidesToScroll:7}},{breakpoint:1025,settings:{slidesToShow:5,slidesToScroll:5}},{breakpoint:769,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:580,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:321,settings:{slidesToShow:1,slidesToScroll:1}}]})}function popupReady(){$(".popup-pic").magnificPopup({type:"image",showCloseBtn:!1,gallery:{enabled:!0}})}function getMovies(e){movie.topMovies(e).then(e=>{ui.printMovies(e)}).catch(e=>console.log(e))}function getSeries(e){movie.topSeries(e).then(e=>{ui.printSeries(e)}).catch(e=>console.log(e))}function getGenres(){document.querySelector("#movies.active-link")?movie.genreListMovies().then(e=>{ui.printMovieGenres(e)}).catch(e=>console.log(e)):document.querySelector("#series.active-link")&&movie.genreListSeries().then(e=>{ui.printSeriesGenres(e)}).catch(e=>console.log(e))}function openModal(e){var t=fixupMouse(e);if("movie"===t.target.dataset.id){const e=t.target.id;movie.searchMovieId(e).then(e=>{ui.printModalMovie(e),ui.printSimilarMovies(e),slickReady()}).catch(e=>console.log(e))}else if("serie"===t.target.dataset.id){const e=t.target.id;movie.searchSerieId(e).then(e=>{ui.printModalSerie(e),ui.printSimilarSeries(e),slickReady()}).catch(e=>console.log(e))}}function printActor(e){const t=fixupMouse(e).target.dataset.actor;movie.getActors(t).then(e=>{ui.printActor(e),popupReady()}).catch(e=>console.log(e))}function expand(){const e=document.querySelector(".bio");"50px"==window.getComputedStyle(e).getPropertyValue("max-height")?(e.style.maxHeight="300px",document.querySelector(".expand-btn").innerHTML="Close"):(e.style.maxHeight="50px",document.querySelector(".expand-btn").innerHTML="Open")}function printSimilar(e){var t=fixupMouse(e);if("movie"===t.target.dataset.id){const e=t.target.id;movie.searchMovieId(e).then(e=>{ui.printModalMovie(e),ui.printSimilarMovies(e),slickReady()}).catch(e=>console.log(e))}else if("serie"===t.target.dataset.id){const e=t.target.id;movie.searchSerieId(e).then(e=>{ui.printModalSerie(e),ui.printSimilarSeries(e),slickReady()}).catch(e=>console.log(e))}}function closeModal(){ui.clearModal()}function openVideo(){document.querySelector(".myModal").style.overflow="hidden",document.querySelector(".video-container").style.display="block",player.playVideo()}let genreId;function printByGenre(e){moviesPage=1,seriesPage=1,document.querySelector(".grid").innerHTML="",ui.clearInput(),genreId=e.target.dataset.genre,document.querySelector("#movies.active-link")?movie.movieGenre(moviesPage,genreId).then(e=>{ui.printMovieByGenre(e)}).catch(e=>console.log(e)):document.querySelector("#series.active-link")&&movie.serieGenre(seriesPage,genreId).then(e=>{ui.printSeriesByGenres(e)}).catch(e=>console.log(e))}document.addEventListener("DOMContentLoaded",getMovies),document.addEventListener("DOMContentLoaded",getGenres),document.getElementById("movies").addEventListener("click",()=>{document.querySelector(".grid").innerHTML="",getMovies(),ui.clearInput(),genreId=""}),document.getElementById("series").addEventListener("click",()=>{document.querySelector(".grid").innerHTML="",getSeries(),ui.clearInput(),genreId=""}),document.querySelector(".MyNav").addEventListener("click",e=>{moviesPage=1,seriesPage=1,ui.activeLink(e),getGenres()}),document.querySelector(".grid").addEventListener("click",openModal),document.getElementById("inlineFormInputGroup").addEventListener("keyup",e=>{const t=document.getElementById("inlineFormInputGroup").value;t.length>=3&&movie.searchCatalogue(t).then(e=>{ui.printSearchCat(e),e.searchMovieCatalogueInfo.results<1&&e.searchSeriesCatalogueInfo.results<1&&ui.noMovieFound()}).catch(e=>{console.log(e)}),t.length<1&&(getMovies(),moviesPage=1,seriesPage=1,document.getElementById("series").classList.remove("active-link"),document.getElementById("movies").classList.add("active-link"),document.querySelector(".grid").innerHTML=""),e.preventDefault()}),document.querySelector(".dropdown-menu").addEventListener("click",printByGenre);let moviesPage=1,seriesPage=1;function loadMore(){const e=document.getElementById("inlineFormInputGroup").value;window.innerHeight+window.scrollY>document.body.offsetHeight+56&&(document.querySelector("#movies.active-link")&&!e?genreId?(moviesPage++,movie.movieGenre(moviesPage,genreId).then(e=>{ui.printMovieByGenre(e)}).catch(e=>console.log(e))):getMovies(++moviesPage):document.querySelector("#series.active-link")&&!e?genreId?(seriesPage++,movie.serieGenre(seriesPage,genreId).then(e=>{ui.printSeriesByGenres(e)}).catch(e=>console.log(e))):getSeries(++seriesPage):e&&console.log("No more Suggestions."))}window.addEventListener("scroll",loadMore);class Movie{constructor(e){this.apikey="fdde855cd4b047fb1a0ea24a7ec58362"}async topMovies(e){const t=await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${this.apikey}&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=${e}`);return await t.json()}async topSeries(e){const t=await fetch(`https://api.themoviedb.org/3/discover/tv?api_key=${this.apikey}&language=en-US&sort_by=popularity.desc&page=${e}`);return await t.json()}async searchCatalogue(e){const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${this.apikey}&language=en-US&sort_by=popularity.desc&include_adult=false&query=${e}`),i=await fetch(`https://api.themoviedb.org/3/search/tv?api_key=${this.apikey}&language=en-US&sort_by=popularity.desc&include_adult=false&query=${e}`);return{searchMovieCatalogueInfo:await t.json(),searchSeriesCatalogueInfo:await i.json()}}async searchMovieId(e){const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${this.apikey}&language=en-US&append_to_response=videos,similar`),i=await fetch(`https://api.themoviedb.org/3/movie/${e}/credits?api_key=${this.apikey}&language=en-US`);return{movieDetailsInfo:await t.json(),movieCastInfo:await i.json()}}async searchSerieId(e){const t=await fetch(`https://api.themoviedb.org/3/tv/${e}?api_key=${this.apikey}&language=en-US&append_to_response=videos,similar,credits`);return await t.json()}async genreListMovies(){const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=fdde855cd4b047fb1a0ea24a7ec58362&language=en-US");return await e.json()}async genreListSeries(){const e=await fetch("https://api.themoviedb.org/3/genre/tv/list?api_key=fdde855cd4b047fb1a0ea24a7ec58362&language=en-US");return await e.json()}async movieGenre(e,t){const i=await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${this.apikey}&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=${e}&with_genres=${t}`);return await i.json()}async serieGenre(e,t){const i=await fetch(`https://api.themoviedb.org/3/discover/tv?api_key=${this.apikey}&language=en-US&sort_by=popularity.desc&page=${e}&with_genres=${t}`);return await i.json()}async getActors(e){const t=await fetch(`https://api.themoviedb.org/3/person/${e}?api_key=fdde855cd4b047fb1a0ea24a7ec58362&language=en-US&append_to_response=combined_credits,external_ids,images`);return await t.json()}}class UI{printMovies(e){let t="";e.results.reduce((e,t)=>null==t.backdrop_path?(t.rejectionReason="no backdrop",e.rejects.push(t),e):null==t.poster_path?(t.rejectionReason="no photo",e.rejects.push(t),e):t.popularity<4?(t.rejectionReason="bad rating",e.rejects.push(t),e):(e.matches.push(t),e),{matches:[],rejects:[]}).matches.forEach(e=>{let i=e.poster_path;const a=e.title,s=e.release_date.substring(0,4),n=e.vote_average,o=e.id;t=`\n                        <div class="grid-item col-6 col-sm-4 col-md-3 col-lg-2">\n                            <div class="grid-item-content">\n                                <img src="https://image.tmdb.org/t/p/w500/${i}">\n                                <div id="${o}" class="overlay" data-id="movie"></div>\n                                <div class="gall-text text-center">\n                                    <h4 id="${o}" class="content-title" data-id="movie">${a}</h4>\n                                    <span id="${o}" data-id="movie"><i class="fas fa-heart fa-sm"></i> ${n} hearts<span>\n                                    <br>\n                                    <span id="${o}" data-id="movie">${s}</span>  \n                                </div>\n                            </div>\n                            </div>\n                        </div>\n                    `,document.querySelector(".grid").innerHTML+=t})}printSeries(e){let t="";e.results.reduce((e,t)=>null==t.backdrop_path?(t.rejectionReason="no backdrop",e.rejects.push(t),e):null==t.poster_path?(t.rejectionReason="no photo",e.rejects.push(t),e):t.popularity<4?(t.rejectionReason="bad rating",e.rejects.push(t),e):(e.matches.push(t),e),{matches:[],rejects:[]}).matches.forEach(e=>{let i=e.poster_path;const a=e.name,s=e.first_air_date.substring(0,4),n=e.vote_average,o=e.id;t=`\n                    <div class="grid-item col-6 col-sm-4 col-md-3 col-lg-2">\n                        <div class="grid-item-content">\n                            <img src="https://image.tmdb.org/t/p/w500/${i}">\n                            <div id="${o}" class="overlay" data-id="serie"></div>\n                                <div class="gall-text">\n                                    <h4 id="${o}" class="content-title" data-id="serie">${a}</h4>\n                                    <span id="${o}" data-id="serie"><i class="fas fa-heart fa-sm"></i> ${n} hearts<span>\n                                    <br>\n                                    <span id="${o}" data-id="serie">${s}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                `,document.querySelector(".grid").innerHTML+=t})}printSearchCat(e){let t="";e.searchMovieCatalogueInfo.results.reduce((e,t)=>null==t.backdrop_path?(t.rejectionReason="no backdrop",e.rejects.push(t),e):null==t.poster_path?(t.rejectionReason="no photo",e.rejects.push(t),e):t.popularity<4?(t.rejectionReason="bad rating",e.rejects.push(t),e):(e.matches.push(t),e),{matches:[],rejects:[]}).matches.forEach(e=>{const i=e.poster_path,a=e.title,s=e.release_date.substring(0,4),n=e.vote_average,o=e.id;t+=`\n                    <div class="grid-item col-6 col-sm-4 col-md-3 col-lg-2">\n                        <div class="grid-item-content">\n                            <img src="https://image.tmdb.org/t/p/w500/${i}">\n                            <div id="${o}" class="overlay" data-id="movie"></div>\n                                <div class="gall-text">\n                                    <h4 id="${o}" class="content-title" data-id="movie">${a}</h4>\n                                    <span id="${o}" data-id="movie"><i class="fas fa-heart fa-sm"></i> ${n} hearts<span>\n                                    <br>\n                                    <span id="${o}" data-id="movie">${s}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>    \n                `,document.querySelector(".grid").innerHTML=t}),e.searchSeriesCatalogueInfo.results.reduce((e,t)=>null==t.backdrop_path?(t.rejectionReason="no backdrop",e.rejects.push(t),e):null==t.poster_path?(t.rejectionReason="no photo",e.rejects.push(t),e):t.popularity<4?(t.rejectionReason="bad rating",e.rejects.push(t),e):(e.matches.push(t),e),{matches:[],rejects:[]}).matches.forEach(e=>{const i=e.poster_path,a=e.name,s=e.first_air_date.substring(0,4),n=e.vote_average,o=e.id;t+=`\n                    <div class="grid-item col-6 col-sm-4 col-md-3 col-lg-2">\n                            <div class="grid-item-content">\n                                <img src="https://image.tmdb.org/t/p/w500/${i}">\n                                <div id="${o}" class="overlay" data-id="serie"></div>\n                                    <div class="gall-text">\n                                        <h4 id="${o}" class="content-title" data-id="serie">${a}</h4>\n                                        <span id="${o}" data-id="serie"><i class="fas fa-heart fa-sm"></i> ${n} hearts<span>\n                                        <br>\n                                        <span id="${o}" data-id="serie">${s}</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>   \n                    `,document.querySelector(".grid").innerHTML=t})}printModalMovie(e){document.querySelector("body").style.overflow="hidden";let t="";e.movieCastInfo.cast.slice(0,10).forEach(e=>{t+=`\n                    <a href="#!" class="actor" data-actor="${e.id}" onclick="printActor(event)">${e.name}</a>\n                `});let i="";e.movieDetailsInfo.genres.forEach(e=>{i+=`\n                <span class="badge badge-pill badge-light">${e.name}</span> \n            `});const a=e.movieDetailsInfo,s=a.backdrop_path,n=a.budget,o=a.homepage,r=a.imdb_id,l=a.original_language,c=a.title,d=a.overview,p=a.popularity,m=(a.poster_path,a.release_date.substring(0,4)),u=a.runtime,g=a.tagline,v=a.vote_average;let h="";h=`\n                    <div class="myModal">\n                        <i class="far fa-times-circle" id="close-modal" onclick="closeModal()"></i>\n                        <a href="http://www.imdb.com/title/${r}" target="_blank"><i class="fab fa-imdb"></i></a>\n                        <a href="http://www.amazon.com/s/ref=nb_ss_d?tag=chriscoyier-20&url=search-alias%3Ddvd&field-keywords=${c}" target="_blank"><i class="fab fa-amazon"></i></a>\n                        <a href="http://www.netflix.com/Search?lnkctr=srchrd-ips&v1=${c}" target="_blank"><span class="icon-netflix"></span></a>\n                        <a href="${o}" target="_blank"><i class="fas fa-globe"></i></a>\n                        <div class="col-md-12 title">\n                            <h2 class="modal-title">${c}</h2>\n                            <h4 class="modal-title">${g}</h4>\n                        </div>\n                        <div class="col-md-8 ml-auto text">\n                            <p class="overview"><span>Overview:</span> ${d}</p>\n                        </div>\n                        <div class="col-md-6 ml-auto text">\n                            <p class="actors"><span>Cast:</span> ${t}</p>\n                        </div>\n                        ${window.innerWidth>=376?`<div class="col-md-5 ml-auto list">\n                        <ul class="list-group">\n                            <li class="list-group-item title">Movie Info:</li>\n                            <li class="list-group-item ml-5"><p>Language: <span>${l}</span></p></li>\n                            <li class="list-group-item ml-5"><p>Release Date: <span>${m}</span></p></li>\n                            <li class="list-group-item ml-5"><p>Runtime: <span>${u}</span> minutes</p></li>\n                            <li class="list-group-item ml-5"><p>Popularity: <span><i class="fas fa-heart fa-sm"></i> ${v}</span> votes (${p})</p></li>\n                            <li class="list-group-item ml-5"><p>Budget: $<span>${n}</span></p></li>\n                        </ul>\n                        </div>\n                        <div class="col-md-5 ml-auto genres">\n                            <div class="ml-5">${i}</div> \n                        </div>`:""}\n                        \n                        ${e.movieDetailsInfo.videos.results<1?"":`<div class="col-md-5 ml-auto genres">\n                                <button type="button" class="btn btn-outline-light trailer-btn" onclick="openVideo()">Trailer</button> \n                            </div>\n                            <div class="col-md-12 mx-auto video-container">\n                                <iframe src="https://www.youtube.com/embed/${a.videos.results[0].key}?enablejsapi=1&fs=0&iv_load_policy=3&rel=0&showinfo=0" id="trailer-player" frameborder="0" allowfullscreen class="video"></iframe> \n                            </div> `} \n                            \n                            ${e.movieDetailsInfo.similar.results<1?"":'\n                            <div class="mx-auto col-md-1">\n                                <button type="button" class="btn btn-light similar-btn" onclick="ui.openSimilar()"> Similar</button> \n                            </div>\n                            <div class="container-fluid carousel-container">\n                                <div class="print-slick" onclick="printSimilar(event)"></div>\n                            </div>'}\n                    </div>\n                `,document.querySelector(".modal-container").innerHTML=h,document.querySelector(".myModal").style.backgroundImage=`linear-gradient(45deg, rgba(0,0,0,1) 0%,rgba(0,0,0,1) 15%,rgba(255,255,255,.15) 15%,rgba(0,0,0,0) 40%,rgba(0,0,0,0.75) 40%,rgba(0,0,0,0.75) 100%), url(https://image.tmdb.org/t/p/w1280/${s})`,loadYTplayer()}printModalSerie(e){document.querySelector("body").style.overflow="hidden";let t="";e.credits.cast.slice(0,10).forEach(e=>{t+=`\n            <a href="#!" class="actor" data-actor="${e.id}" onclick="printActor(event)">${e.name}</a>\n            `});let i="";e.created_by.forEach(e=>{i+=e.name+", "});let a="";e.genres.forEach(e=>{a+=`\n                <span class="badge badge-pill badge-light">${e.name}</span> \n            `});const s=e.backdrop_path,n=e.name,o=e.homepage,r=e.original_language,l=e.overview,c=e.popularity,d=e.vote_average,p=e.first_air_date.substring(0,4),m=e.last_air_date;e.id;let u="";u=`\n            <div class="myModal">\n            <i class="far fa-times-circle" id="close-modal" onclick="closeModal()"></i>\n            <a href="http://www.imdb.com/find?s=tt&q=${n}" target="_blank"><i class="fab fa-imdb"></i></a>\n            <a href="http://www.amazon.com/s/ref=nb_ss_d?tag=chriscoyier-20&url=search-alias%3Ddvd&field-keywords=${n}" target="_blank"><i class="fab fa-amazon"></i></a>\n            <a href="http://www.netflix.com/Search?lnkctr=srchrd-ips&v1=${n}" target="_blank"><span class="icon-netflix"></span></a>\n            <a href="${o}" target="_blank"><i class="fas fa-globe"></i></a>\n                <div class="col-md-12 title">\n                    <h2 class="modal-title">${n}</h2>\n                </div>\n                <div class="col-md-8 ml-auto text">\n                    <p class="overview"><span>Overview:</span> ${l}</p>\n                </div>\n                <div class="col-md-6 ml-auto text">\n                    <p class="actors"><span>Cast:</span> ${t}</p>\n                </div>\n                <div class="col-md-5 ml-auto list">\n                <ul class="list-group">\n                    <li class="list-group-item title">Series Info:</li>\n                    <li class="list-group-item ml-5"><p>Creators: <span>${i}</span></p></li>\n                    <li class="list-group-item ml-5"><p>Network: <span>${e.networks[0].name}</span></p></li>\n                    <li class="list-group-item ml-5"><p>Language: <span>${r}</span></p></li>\n                    <li class="list-group-item ml-5"><p>Series Started: <span>${p}</span> Latest Air Date: <span>${m}</span></p></li>\n                    <li class="list-group-item ml-5"><p>Runtime: ~ <span>${e.episode_run_time[0]}</span> minutes</p></li>\n                    <li class="list-group-item ml-5"><p>Popularity: <span><i class="fas fa-heart fa-sm"></i> ${d}</span> votes (${c})</p></li>\n                </ul>\n                </div>\n                <div class="col-md-5 ml-auto genres">\n                    <div class="ml-5">${a}</div> \n                </div>\n                ${e.videos.results<1?"":` \n                    <div class="col-md-5 ml-auto genres">\n                        <button type="button" class="btn btn-outline-light trailer-btn" onclick="openVideo()">Trailer</button> \n                    </div>\n                    <div class="col-md-12 mx-auto video-container">\n                        <iframe src="https://www.youtube.com/embed/${e.videos.results[0].key}?enablejsapi=1&fs=0&iv_load_policy=3&rel=0&showinfo=0" id="trailer-player" frameborder="0" allowfullscreen class="video"></iframe> \n                    </div> `}  \n                \n                ${e.similar.results<1?"":'\n                    <div class="mx-auto col-md-1">\n                        <button type="button" class="btn btn-light similar-btn" onclick="ui.openSimilar()"> Similar</button> \n                    </div>\n                    <div class="container-fluid carousel-container" onclick="printSimilar(event)">\n                        <div class="print-slick"></div>\n                    </div>'}\n            </div>\n        `,document.querySelector(".modal-container").innerHTML=u,document.querySelector(".myModal").style.backgroundImage=`linear-gradient(45deg, rgba(0,0,0,1) 0%,rgba(0,0,0,1) 15%,rgba(255,255,255,.15) 15%,rgba(0,0,0,0) 40%,rgba(0,0,0,0.75) 40%,rgba(0,0,0,0.75) 100%), url(https://image.tmdb.org/t/p/w1280/${s})`,loadYTplayer()}printSimilarMovies(e){let t="";e.movieDetailsInfo.similar.results.forEach(e=>{t+=`\n                <div class="slick-item">\n                    <img src="https://image.tmdb.org/t/p/w154/${e.poster_path}"  id="${e.id}" data-id="movie" alt="Similar">\n                </div>\n            `}),document.querySelector(".print-slick").innerHTML=t}printSimilarSeries(e){let t="";e.similar.results.forEach(e=>{t+=`\n                <div class="slick-item">\n                    <img src="https://image.tmdb.org/t/p/w154/${e.poster_path}"  id="${e.id}" data-id="serie" alt="Similar">\n                </div>\n            `}),document.querySelector(".print-slick").innerHTML=t}openSimilar(){document.querySelector(".similar-btn").classList.toggle("sm-btn-active"),document.querySelector(".carousel-container").classList.toggle("car-cont-active")}clearModal(){const e=document.querySelector(".myModal"),t=document.querySelector(".video-container"),i=document.querySelector(".actorModal");t&&"block"===t.style.display?(t.style.display="none",player.stopVideo()):i?i.remove():e&&(e.remove(),document.querySelector("body").style.overflow="auto")}clearInput(){document.getElementById("inlineFormInputGroup").value=""}noMovieFound(){document.querySelector(".grid").innerHTML="";let e="";e='\n            <div class="container text-center">\n                <div class="no-movie-found">\n                    <h2>Wops! We couldn\'t find that! Try another one! :)</h2>\n                    <img src="https://media.giphy.com/media/323W9jGIsDzUFUuOtd/giphy.gif">\n                </div>\n            </div>\n        ',document.querySelector(".grid").innerHTML=e}activeLink(e){const t=document.getElementById("movies"),i=document.getElementById("series"),a=e.target.id;"movies"===a?(i.classList.remove("active-link"),t.classList.add("active-link")):"series"===a&&(t.classList.remove("active-link"),i.classList.add("active-link"))}printMovieGenres(e){let t="";e.genres.forEach(e=>{const i=e.id,a=e.name;t+=`\n                <a class="dropdown-item" data-genre="${i}" href="#">${a}</a>\n            `,document.querySelector(".dropdown-menu").innerHTML=t})}printSeriesGenres(e){let t="";e.genres.forEach(e=>{const i=e.id,a=e.name;t+=`\n                <a class="dropdown-item" data-genre="${i}" href="#">${a}</a>\n            `,document.querySelector(".dropdown-menu").innerHTML=t})}printMovieByGenre(e){let t="";e.results.reduce((e,t)=>null==t.poster_path?(t.rejectionReason="no photo",e.rejects.push(t),e):t.popularity<4?(t.rejectionReason="bad rating",e.rejects.push(t),e):(e.matches.push(t),e),{matches:[],rejects:[]}).matches.forEach(e=>{let i=e.poster_path;const a=e.original_title,s=e.release_date.substring(0,4),n=e.vote_average,o=e.id;t=`\n                        <div class="grid-item col-6 col-sm-4 col-md-3 col-lg-2">\n                            <div class="grid-item-content">\n                                <img src="https://image.tmdb.org/t/p/w500/${i}">\n                                <div id="${o}" class="overlay" data-id="movie"></div>\n                                <div class="gall-text text-center">\n                                    <h4 id="${o}" class="content-title" data-id="movie">${a}</h4>\n                                    <span id="${o}" data-id="movie"><i class="fas fa-heart fa-sm"></i> ${n} hearts<span>\n                                    <br>\n                                    <span id="${o}" data-id="movie">${s}</span>   \n                                </div>\n                            </div>\n                            </div>\n                        </div>\n                    `,document.querySelector(".grid").innerHTML+=t})}printSeriesByGenres(e){let t="";e.results.reduce((e,t)=>null==t.poster_path?(t.rejectionReason="no photo",e.rejects.push(t),e):t.popularity<4?(t.rejectionReason="bad rating",e.rejects.push(t),e):(e.matches.push(t),e),{matches:[],rejects:[]}).matches.forEach(e=>{let i=e.poster_path;const a=e.name,s=e.first_air_date.substring(0,4),n=e.vote_average,o=e.id;t=`\n                    <div class="grid-item col-6 col-sm-4 col-md-3 col-lg-2" id="genre">\n                        <div class="grid-item-content">\n                            <img src="https://image.tmdb.org/t/p/w500/${i}">\n                            <div id="${o}" class="overlay" data-id="serie"></div>\n                                <div class="gall-text">\n                                    <h4 id="${o}" class="content-title" data-id="serie">${a}</h4>\n                                    <span id="${o}" data-id="serie"><i class="fas fa-heart fa-sm"></i> ${n} hearts<span>\n                                    <br>\n                                    <span id="${o}" data-id="serie">${s}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                `,document.querySelector(".grid").innerHTML+=t})}printActor(e){console.log(e);const t=e.combined_credits.cast.reduce((e,t)=>"tv"==t.media_type?(e.series.push(t),e):(e.movies.push(t),e),{movies:[],series:[]});let i="";t.movies.forEach(e=>{const t=e.title,a=e.release_date,s=(e.id,e.character),n=a?a.substring(0,4):"n/a";i+=`\n            <li class="list-group-item credit d-flex justify-content-between align-items-center">\n                <span class="cr-title">${t}<br><span class="role">${s}</span></span> \n                <span class="badge badge-light badge-pill badge-year">${n}</span>\n            </li>    \n            `});let a="";t.series.forEach(e=>{const t=e.name,i=e.first_air_date.substring(0,4),s=(e.id,e.character);a+=`\n            <li class="list-group-item credit d-flex justify-content-between align-items-center">\n                <span class="cr-title">${t}<br><span class="role">${s}</span></span> \n                <span class="badge badge-light badge-pill">${i}</span>\n            </li>    \n            `}),document.querySelector(".modal-container").style.overflow="scroll";const s=e.biography,n=e.birthday,o=e.name,r=e.place_of_birth,l=e.profile_path,c=n?n.split("-").reverse().join("-"):"n/a";let d="";const p=e.external_ids,m=[];m.push(p),m.forEach(e=>{let t=e.facebook_id,i=e.instagram_id,a=e.twitter_id,s=e.imdb_id;d+=`\n                ${t?`<a target="_blank" href="https://www.facebook.com/${t}"><i class="fab fa-facebook-square"></i></a>`:""}\n                ${i?`<a target="_blank" href="https://www.instagram.com/${i}"><i class="fab fa-instagram"></i></a>`:""}\n                ${a?`<a target="_blank" href="https://twitter.com/${a}"> <i class="fab fa-twitter-square"></i></a>`:""}\n                ${s?`<a target="_blank" href="https://www.imdb.com/name/${s}"><i class="fab fa-imdb"></i></a>`:""}\n            `});let u="";e.images.profiles.forEach(e=>{const t=e.file_path;u+=`\n                <div class="col-lg-2 foto-gall">\n                    <a class="popup-pic" href="https://image.tmdb.org/t/p/w780/${t}">\n                        <img class="gallery-actor" src="https://image.tmdb.org/t/p/w342/${t}">\n                    </a>\n                </div>\n            `});let g="";g=`\n            <div class="actorModal">\n                <i class="far fa-times-circle" id="close-modal" onclick="closeModal()"></i>\n                <div class="container-fluid">\n                    <div class="row">\n                        <div class="col-md-12 title flex-col">\n\n                            <h2 class="modal-title">${o} </h2>\n                          \n                              <h4><span> DOB: </span>${c} </h4>\n                              \n                              <h4>  <span> POB: </span> ${void 0!=r?r:"n/a"}</h4>\n                       </div>\n                        <div class="col-md-6 actor-pic">\n                            ${l?`<img class="main-pic" src="https://image.tmdb.org/t/p/w780/${l}">`:'<img class="main-pic" src="assets/media/images/popcorn.png">'} \n                            <div class="social-icons">\n                                ${d}\n                            </div>\n                                <h3>Gallery</h3>\n                                <div class="row gallery-main">\n                                    ${u}\n                                </div>\n                        </div>\n                        <div class="col-md-6 text">\n                            <p class="bio"><span>Overview:</span> ${s}</p>\n                            <button type="button" class="btn expand-btn" onclick="expand()"> Open</button> \n                            <h3>Movies</h3>\n                            <ul class="list-group credits">${i}</ul>\n                            ${t.series.length<1?"":"\n                                <h3>Series</h3>\n                            "} \n                            <ul class="list-group credits">${a}</ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,document.querySelector(".actor-modal-container").innerHTML=g;document.querySelector(".actorModal")}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vdmllYXBpLmpzIiwidWkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2YUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoidXNlcnNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8hIG1vdXNlIGhhY2sgZm9yIGNyb3NzIGJ0b3dzZXIgY29tcGF0aWJpbGl0eSBvZiBldmVudFxuZml4dXBNb3VzZSA9IGV2ZW50ID0+IHtcbiAgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG4gIHZhciBlID0ge1xuICAgIGV2ZW50OiBldmVudCxcbiAgICB0YXJnZXQ6IGV2ZW50LnRhcmdldCA/IGV2ZW50LnRhcmdldCA6IGV2ZW50LnNyY0VsZW1lbnQsXG4gICAgd2hpY2g6IGV2ZW50LndoaWNoXG4gICAgICA/IGV2ZW50LndoaWNoXG4gICAgICA6IGV2ZW50LmJ1dHRvbiA9PT0gMVxuICAgICAgICA/IDFcbiAgICAgICAgOiBldmVudC5idXR0b24gPT09IDJcbiAgICAgICAgICA/IDNcbiAgICAgICAgICA6IGV2ZW50LmJ1dHRvbiA9PT0gNFxuICAgICAgICAgICAgPyAyXG4gICAgICAgICAgICA6IDEsXG4gICAgeDogZXZlbnQueCA/IGV2ZW50LnggOiBldmVudC5jbGllbnRYLFxuICAgIHk6IGV2ZW50LnkgPyBldmVudC55IDogZXZlbnQuY2xpZW50WVxuICB9O1xuICByZXR1cm4gZTtcbn07XG5cbi8vISBPQkpFQ1QgSU5JVElBTElaRVJTXG4vLyBpbml0IG1vdmllIG9iamVjdCBmcm9tIGNsYXNzXG5jb25zdCBtb3ZpZSA9IG5ldyBNb3ZpZSgpO1xuXG4vLyBpbml0IHVpIG9iamVjdFxuY29uc3QgdWkgPSBuZXcgVUkoKTtcblxuLy8gaW5pdCBZVCBvYmplY3RcbnZhciBwbGF5ZXI7XG5mdW5jdGlvbiBsb2FkWVRwbGF5ZXIoKSB7XG4gIHBsYXllciA9IG5ldyBZVC5QbGF5ZXIoJ3RyYWlsZXItcGxheWVyJyk7XG59XG5cbi8vaW5pdCBTbGljayBDYXJvdXNlbCBQbHVnaW5cbmZ1bmN0aW9uIHNsaWNrUmVhZHkoKSB7XG4gICQoJy5wcmludC1zbGljaycpLnNsaWNrKHtcbiAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICBzbGlkZXNUb1Nob3c6IDcsXG4gICAgc2xpZGVzVG9TY3JvbGw6IDcsXG4gICAgYXJyb3dzOiB0cnVlLFxuICAgIGRyYWdhYmxlOiB0cnVlLFxuICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgIHtcbiAgICAgICAgYnJlYWtwb2ludDogMTkyMSxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEwLFxuICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxMFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBicmVha3BvaW50OiAxNjIxLFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIHNsaWRlc1RvU2hvdzogOCxcbiAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogOFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBicmVha3BvaW50OiAxMzc2LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIHNsaWRlc1RvU2hvdzogNyxcbiAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogN1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBicmVha3BvaW50OiAxMDI1LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIHNsaWRlc1RvU2hvdzogNSxcbiAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogNVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBicmVha3BvaW50OiA3NjksXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgc2xpZGVzVG9TaG93OiA0LFxuICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiA0XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGJyZWFrcG9pbnQ6IDU4MCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDJcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgYnJlYWtwb2ludDogMzIxLFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgXVxuICB9KTtcbn1cblxuLy8gaW5pdCBtYWduaWZpYyBwb3B1cCBwbHVnaW5cbmZ1bmN0aW9uIHBvcHVwUmVhZHkoKSB7XG4gICQoJy5wb3B1cC1waWMnKS5tYWduaWZpY1BvcHVwKHtcbiAgICB0eXBlOiAnaW1hZ2UnLFxuICAgIHNob3dDbG9zZUJ0bjogZmFsc2UsXG4gICAgZ2FsbGVyeToge1xuICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgIH1cbiAgfSk7XG59XG5cbi8vISBPTiBMT0FEIEdFVCBSRVNVTFRTXG4vL2dldCBtb3ZpZXMgYW5kIGdlbnJlcyBvbiBET00gbG9hZFxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGdldE1vdmllcyk7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZ2V0R2VucmVzKTtcblxuZnVuY3Rpb24gZ2V0TW92aWVzKHBhZ2UpIHtcbiAgbW92aWVcbiAgICAudG9wTW92aWVzKHBhZ2UpXG4gICAgLnRoZW4odG9wTW92aWVzUmVzID0+IHtcbiAgICAgIHVpLnByaW50TW92aWVzKHRvcE1vdmllc1Jlcyk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xufVxuXG4vLyBnZXQgc2VyaWVzXG5mdW5jdGlvbiBnZXRTZXJpZXMocGFnZSkge1xuICBtb3ZpZVxuICAgIC50b3BTZXJpZXMocGFnZSlcbiAgICAudGhlbih0b3BTZXJpZXNSZXMgPT4ge1xuICAgICAgdWkucHJpbnRTZXJpZXModG9wU2VyaWVzUmVzKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG59XG5cbi8vZ2V0IGdlbnJlcyAtLSBjYWxsZWQgb24gZG9jdW1lbnQgbG9hZFxuZnVuY3Rpb24gZ2V0R2VucmVzKCkge1xuICAvLyBvbiBsb2FkIGNhbGwgdGhlIGFwaSAgLS0gZ2V0IGdlbnJlcyBsaXN0IHNlbmQgdGhlbSB0byB1aVxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vdmllcy5hY3RpdmUtbGluaycpKSB7XG4gICAgbW92aWVcbiAgICAgIC5nZW5yZUxpc3RNb3ZpZXMoKVxuICAgICAgLnRoZW4oZ2VucmVMaXN0TW92aWVzUmVzID0+IHtcbiAgICAgICAgdWkucHJpbnRNb3ZpZUdlbnJlcyhnZW5yZUxpc3RNb3ZpZXNSZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nlcmllcy5hY3RpdmUtbGluaycpKSB7XG4gICAgbW92aWVcbiAgICAgIC5nZW5yZUxpc3RTZXJpZXMoKVxuICAgICAgLnRoZW4oZ2VucmVMaXN0U2VyaWVzUmVzID0+IHtcbiAgICAgICAgdWkucHJpbnRTZXJpZXNHZW5yZXMoZ2VucmVMaXN0U2VyaWVzUmVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuICB9XG59XG5cbi8vIGV2ZW50IGxpc3RlbmVyIG1vdmllcyBsaW5rIE5hdmJhclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vdmllcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAvLyBjbGVhciBkb20gZnJvbSBwcmV2aWV3cyBhcHBlbmRlZCByZXN1bHRzXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkJykuaW5uZXJIVE1MID0gJyc7XG4gIC8vIGNhbGwgZnVuY3Rpb25cbiAgZ2V0TW92aWVzKCk7XG4gIC8vIGNsZWFyIHNlYXJjaCBpbnB1dCBpZiBpdCBoYXMgbGV0dGVycyBpbnNpZGVcbiAgdWkuY2xlYXJJbnB1dCgpO1xuICAvLyByZXNldCBnbG9iYWxcbiAgZ2VucmVJZCA9ICcnO1xufSk7XG5cbi8vZXZlbnQgbGlzdGVuZXIgc2VyaWVzIGxpbmsgTmF2YmFyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VyaWVzJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkJykuaW5uZXJIVE1MID0gJyc7XG4gIGdldFNlcmllcygpO1xuICB1aS5jbGVhcklucHV0KCk7XG4gIC8vIHJlc2V0IGdsb2JhbFxuICBnZW5yZUlkID0gJyc7XG59KTtcblxuLy8hIE5BVkJBUiBBTkQgUEFHSU5BVElPTlxuLy8gRXZ0IExpc3RlbmVyIGZvciBuYXYgYWN0aXZlIGxpbmtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5NeU5hdicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIC8vIGZpcnN0IHJlc2V0IGNvdW50ZXJzXG4gIG1vdmllc1BhZ2UgPSAxO1xuICBzZXJpZXNQYWdlID0gMTtcbiAgLy90aGVuIHNldCBhY3RpdmUgbGlua1xuICB1aS5hY3RpdmVMaW5rKGUpO1xuICAvL2NhbGwgZ2VucmUgZnVuY3Rpb25cbiAgZ2V0R2VucmVzKCk7XG4gIC8vIC8vIHJlc2V0IGdsb2JhbFxuICAvLyBnZW5yZUlkID0gJyc7XG59KTtcblxuLy8hIE9QRU4gQ0xPU0UgTU9EQUxcbi8vIGV2ZW50IGxpc3RlbmVyIG1vZGFsXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk1vZGFsKTtcblxuZnVuY3Rpb24gb3Blbk1vZGFsKGV2ZW50KSB7XG4gIHZhciBlID0gZml4dXBNb3VzZShldmVudCk7XG5cbiAgaWYgKGUudGFyZ2V0LmRhdGFzZXQuaWQgPT09ICdtb3ZpZScpIHtcbiAgICBjb25zdCBjbGlja0lkID0gZS50YXJnZXQuaWQ7IC8vISBpZiBpdHMgYSBtb3ZpZVxuXG4gICAgLy8gbW92aWUgZGV0YWlscyBhbmQgY2FzdCBieSBpZFxuICAgIG1vdmllXG4gICAgICAuc2VhcmNoTW92aWVJZChjbGlja0lkKVxuICAgICAgLnRoZW4oc2VhcmNoTW92aWVJZFJlcyA9PiB7XG4gICAgICAgIHVpLnByaW50TW9kYWxNb3ZpZShzZWFyY2hNb3ZpZUlkUmVzKTtcbiAgICAgICAgdWkucHJpbnRTaW1pbGFyTW92aWVzKHNlYXJjaE1vdmllSWRSZXMpO1xuICAgICAgICBzbGlja1JlYWR5KCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfSBlbHNlIGlmIChlLnRhcmdldC5kYXRhc2V0LmlkID09PSAnc2VyaWUnKSB7XG4gICAgLy8hIGlmIGl0cyBhIHNlcmllc1xuICAgIGNvbnN0IGNsaWNrSWQgPSBlLnRhcmdldC5pZDtcblxuICAgIC8vIHNlcmllIGRldGFpbHMgRlVMTFxuICAgIG1vdmllXG4gICAgICAuc2VhcmNoU2VyaWVJZChjbGlja0lkKVxuICAgICAgLnRoZW4oc2VhcmNoU2VyaWVJZFJlcyA9PiB7XG4gICAgICAgIHVpLnByaW50TW9kYWxTZXJpZShzZWFyY2hTZXJpZUlkUmVzKTtcbiAgICAgICAgdWkucHJpbnRTaW1pbGFyU2VyaWVzKHNlYXJjaFNlcmllSWRSZXMpO1xuICAgICAgICBzbGlja1JlYWR5KCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfVxufVxuXG4vLyEgR0VUIEFDVE9SU1xuXG5mdW5jdGlvbiBwcmludEFjdG9yKGV2ZW50KSB7XG4gIHZhciBlID0gZml4dXBNb3VzZShldmVudCk7XG5cbiAgY29uc3QgYWN0b3JJZCA9IGUudGFyZ2V0LmRhdGFzZXQuYWN0b3I7XG5cbiAgbW92aWVcbiAgICAuZ2V0QWN0b3JzKGFjdG9ySWQpXG4gICAgLnRoZW4oZ2V0QWN0b3JSZXMgPT4ge1xuICAgICAgdWkucHJpbnRBY3RvcihnZXRBY3RvclJlcyk7XG4gICAgICBwb3B1cFJlYWR5KCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xufVxuXG4vLyEgRVhQQU5EIEFDVE9SIEJJT1xuZnVuY3Rpb24gZXhwYW5kKCkge1xuICBjb25zdCBiaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmlvJyk7XG4gIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoYmlvKTtcbiAgY29uc3QgYmlvU2l6ZSA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ21heC1oZWlnaHQnKTtcblxuICBpZiAoYmlvU2l6ZSA9PSAnNTBweCcpIHtcbiAgICBiaW8uc3R5bGUubWF4SGVpZ2h0ID0gJzMwMHB4JztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXhwYW5kLWJ0bicpLmlubmVySFRNTCA9ICdDbG9zZSc7XG4gIH0gZWxzZSB7XG4gICAgYmlvLnN0eWxlLm1heEhlaWdodCA9ICc1MHB4JztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXhwYW5kLWJ0bicpLmlubmVySFRNTCA9ICdPcGVuJztcbiAgfVxufVxuXG4vLyEgR08gVE8gU0lNSUxBUlxuZnVuY3Rpb24gcHJpbnRTaW1pbGFyKGV2ZW50KSB7XG4gIHZhciBlID0gZml4dXBNb3VzZShldmVudCk7XG5cbiAgaWYgKGUudGFyZ2V0LmRhdGFzZXQuaWQgPT09ICdtb3ZpZScpIHtcbiAgICBjb25zdCBjbGlja0lkID0gZS50YXJnZXQuaWQ7IC8vISBpZiBpdHMgYSBtb3ZpZVxuXG4gICAgLy8gbW92aWUgZGV0YWlscyBhbmQgY2FzdCBieSBpZFxuICAgIG1vdmllXG4gICAgICAuc2VhcmNoTW92aWVJZChjbGlja0lkKVxuICAgICAgLnRoZW4oc2VhcmNoTW92aWVJZFJlcyA9PiB7XG4gICAgICAgIHVpLnByaW50TW9kYWxNb3ZpZShzZWFyY2hNb3ZpZUlkUmVzKTtcbiAgICAgICAgdWkucHJpbnRTaW1pbGFyTW92aWVzKHNlYXJjaE1vdmllSWRSZXMpO1xuICAgICAgICBzbGlja1JlYWR5KCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfSBlbHNlIGlmIChlLnRhcmdldC5kYXRhc2V0LmlkID09PSAnc2VyaWUnKSB7XG4gICAgLy8hIGlmIGl0cyBhIHNlcmllc1xuICAgIGNvbnN0IGNsaWNrSWQgPSBlLnRhcmdldC5pZDtcblxuICAgIC8vIHNlcmllIGRldGFpbHMgRlVMTFxuICAgIG1vdmllXG4gICAgICAuc2VhcmNoU2VyaWVJZChjbGlja0lkKVxuICAgICAgLnRoZW4oc2VhcmNoU2VyaWVJZFJlcyA9PiB7XG4gICAgICAgIHVpLnByaW50TW9kYWxTZXJpZShzZWFyY2hTZXJpZUlkUmVzKTtcbiAgICAgICAgdWkucHJpbnRTaW1pbGFyU2VyaWVzKHNlYXJjaFNlcmllSWRSZXMpO1xuICAgICAgICBzbGlja1JlYWR5KCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfVxufVxuXG4vLyBkZWxldGUgbW9kYWwgLy8qIGV2dCBsc3RuciBvbiBodG1sXG5mdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xuICB1aS5jbGVhck1vZGFsKCk7XG59XG5cbi8vIGZ1bmN0aW9uIGZvciB0cmFpbGVyIHZpZGVvIGNhbGxlZCBmcm9tIGh0bWxcbmZ1bmN0aW9uIG9wZW5WaWRlbygpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm15TW9kYWwnKS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8tY29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgcGxheWVyLnBsYXlWaWRlbygpO1xufVxuXG4vLyEgU0VBUkNIIEZPUiBSRVNVTFRTXG4vLyBldmVudCBsaXN0ZW5lciBzZWFyY2hcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmxpbmVGb3JtSW5wdXRHcm91cCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZSA9PiB7XG4gIGNvbnN0IHVzZXJUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lubGluZUZvcm1JbnB1dEdyb3VwJykudmFsdWU7XG5cbiAgLy8gc2VhcmNoIG9ubHkgaWYgdGhlcmUgYXJlIGF0bGVhc3QgMyBsZXR0ZXJzXG4gIGlmICh1c2VyVGV4dC5sZW5ndGggPj0gMykge1xuICAgIC8vIGZpbmQgbW92aWVzIGFuZCBzZXJpZXMgYnkgc2VhcmNoIGtleXdvcmQgbmFtZVxuICAgIG1vdmllXG4gICAgICAuc2VhcmNoQ2F0YWxvZ3VlKHVzZXJUZXh0KVxuICAgICAgLnRoZW4oc2VhcmNoQ2F0YWxvZ3VlUmVzID0+IHtcbiAgICAgICAgdWkucHJpbnRTZWFyY2hDYXQoc2VhcmNoQ2F0YWxvZ3VlUmVzKTtcblxuICAgICAgICAvLyBpZiBubyByZXN1bHRzIHByaW50ICcnbm8gbW92aWUgZm91bmQnJ1xuICAgICAgICBpZiAoXG4gICAgICAgICAgc2VhcmNoQ2F0YWxvZ3VlUmVzLnNlYXJjaE1vdmllQ2F0YWxvZ3VlSW5mby5yZXN1bHRzIDwgMSAmJlxuICAgICAgICAgIHNlYXJjaENhdGFsb2d1ZVJlcy5zZWFyY2hTZXJpZXNDYXRhbG9ndWVJbmZvLnJlc3VsdHMgPCAxXG4gICAgICAgICkge1xuICAgICAgICAgIHVpLm5vTW92aWVGb3VuZCgpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIGlmIGxlc3MgdGhhbiAxIGxldHRlciBvbiBzZWFyY2ggaW5wdXRcbiAgaWYgKHVzZXJUZXh0Lmxlbmd0aCA8IDEpIHtcbiAgICAvL2xvYWQgbW92aWVzXG4gICAgZ2V0TW92aWVzKCk7XG4gICAgLy8gcmVzZXQgY291bnRlcnNcbiAgICBtb3ZpZXNQYWdlID0gMTtcbiAgICBzZXJpZXNQYWdlID0gMTtcbiAgICAvLyBzZXQgYWN0aXZlIGxpbmsgdG8gbW92aWVzIGlmIGl0cyBub3QgdGhlcmVcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VyaWVzJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLWxpbmsnKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW92aWVzJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLWxpbmsnKTtcbiAgICAvLyBjbGVhciBkb20gZnJvbSBwcmV2aW91cyBtb3ZpZXNcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZCcpLmlubmVySFRNTCA9ICcnO1xuICB9XG5cbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG5cbi8vIG1ha2UgZ2xvYmFsXG5sZXQgZ2VucmVJZDtcblxuLy8hIFBSSU5UIEJZIEdFTlJFXG4vLyBnZXQgYWNjZXNzIHRvIGdlbnJlIGxpc3Qgb24gbmF2XG5kb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLW1lbnUnKVxuICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwcmludEJ5R2VucmUpO1xuXG5mdW5jdGlvbiBwcmludEJ5R2VucmUoZSkge1xuICAvL3Jlc2V0IGNvdW50ZXIgZm9yIG5ldyBzZWFyY2hcbiAgbW92aWVzUGFnZSA9IDE7XG4gIHNlcmllc1BhZ2UgPSAxO1xuICAvLyBjbGVhbiBkb20gZnJvbSBwcmV2aW91cyBtb3ZpZXNcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQnKS5pbm5lckhUTUwgPSAnJztcbiAgLy8gY2xlYW4gc2VhcmNoIGlucHV0XG4gIHVpLmNsZWFySW5wdXQoKTtcbiAgLy8gZmV0Y2ggdGhlIGRhdGEtZ2VucmUgb2YgZWFjaCBsaW5rXG4gIGdlbnJlSWQgPSBlLnRhcmdldC5kYXRhc2V0LmdlbnJlO1xuICAvLyBvbiBjbGljayBvZiBlYWNoIHNlbnQgZGF0YSB0byBhcGkgY2FsbFxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vdmllcy5hY3RpdmUtbGluaycpKSB7XG4gICAgLy8hIG1vdmllcyBnZW5yZXNcbiAgICBtb3ZpZVxuICAgICAgLm1vdmllR2VucmUobW92aWVzUGFnZSwgZ2VucmVJZClcbiAgICAgIC50aGVuKG1vdmllR2VucmVSZXMgPT4ge1xuICAgICAgICB1aS5wcmludE1vdmllQnlHZW5yZShtb3ZpZUdlbnJlUmVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuICB9IGVsc2UgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZXJpZXMuYWN0aXZlLWxpbmsnKSkge1xuICAgIC8vISBzZXJpZXMgZ2VucmVzXG4gICAgbW92aWVcbiAgICAgIC5zZXJpZUdlbnJlKHNlcmllc1BhZ2UsIGdlbnJlSWQpXG4gICAgICAudGhlbihzZXJpZUdlbnJlUmVzID0+IHtcbiAgICAgICAgdWkucHJpbnRTZXJpZXNCeUdlbnJlcyhzZXJpZUdlbnJlUmVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuICB9XG59XG5cbi8vISBMT0FEIE1PUkUgTElTVEVORVJcbi8vIGdsb2JhbHMgZm9yIGNvdW50ZXJcbmxldCBtb3ZpZXNQYWdlID0gMTtcbmxldCBzZXJpZXNQYWdlID0gMTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGxvYWRNb3JlKTtcbmZ1bmN0aW9uIGxvYWRNb3JlKCkge1xuICAvLyBkZWZpbmUgaW5wdXQgY29uc3RcbiAgY29uc3QgdXNlclRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5saW5lRm9ybUlucHV0R3JvdXAnKS52YWx1ZTtcblxuICAvLyBpZiBib3R0b20gb2YgcGFnZVxuICBpZiAod2luZG93LmlubmVySGVpZ2h0ICsgd2luZG93LnNjcm9sbFkgPiBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCArIDU2KSB7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb3ZpZXMuYWN0aXZlLWxpbmsnKSAmJiAhdXNlclRleHQpIHtcbiAgICAgIGlmICghZ2VucmVJZCkge1xuICAgICAgICBtb3ZpZXNQYWdlKys7XG4gICAgICAgIGdldE1vdmllcyhtb3ZpZXNQYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vdmllc1BhZ2UrKztcbiAgICAgICAgbW92aWVcbiAgICAgICAgICAubW92aWVHZW5yZShtb3ZpZXNQYWdlLCBnZW5yZUlkKVxuICAgICAgICAgIC50aGVuKG1vdmllR2VucmVSZXMgPT4ge1xuICAgICAgICAgICAgdWkucHJpbnRNb3ZpZUJ5R2VucmUobW92aWVHZW5yZVJlcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nlcmllcy5hY3RpdmUtbGluaycpICYmICF1c2VyVGV4dCkge1xuICAgICAgaWYgKCFnZW5yZUlkKSB7XG4gICAgICAgIHNlcmllc1BhZ2UrKztcbiAgICAgICAgZ2V0U2VyaWVzKHNlcmllc1BhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VyaWVzUGFnZSsrO1xuICAgICAgICBtb3ZpZVxuICAgICAgICAgIC5zZXJpZUdlbnJlKHNlcmllc1BhZ2UsIGdlbnJlSWQpXG4gICAgICAgICAgLnRoZW4oc2VyaWVHZW5yZVJlcyA9PiB7XG4gICAgICAgICAgICB1aS5wcmludFNlcmllc0J5R2VucmVzKHNlcmllR2VucmVSZXMpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIG9uIHNlYXJjaCBtb2RlIGRvbnQgbG9hZCBtb3JlXG4gICAgfSBlbHNlIGlmICh1c2VyVGV4dCkge1xuICAgICAgY29uc29sZS5sb2coJ05vIG1vcmUgU3VnZ2VzdGlvbnMuJyk7XG4gICAgfVxuICB9XG59XG4iLCJjbGFzcyBNb3ZpZSB7XG4gIGNvbnN0cnVjdG9yKHBhZ2UpIHtcbiAgICB0aGlzLmFwaWtleSA9ICdmZGRlODU1Y2Q0YjA0N2ZiMWEwZWEyNGE3ZWM1ODM2Mic7XG4gIH1cblxuICAvLyEgVE9QIE1PVklFUyBBTkQgU0VSSUVTXG4gIGFzeW5jIHRvcE1vdmllcyhwYWdlKSB7XG4gICAgY29uc3QgdG9wTW92aWVzUmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9kaXNjb3Zlci9tb3ZpZT9hcGlfa2V5PSR7XG4gICAgICAgIHRoaXMuYXBpa2V5XG4gICAgICB9Jmxhbmd1YWdlPWVuLVVTJnNvcnRfYnk9cG9wdWxhcml0eS5kZXNjJmluY2x1ZGVfYWR1bHQ9ZmFsc2UmaW5jbHVkZV92aWRlbz1mYWxzZSZwYWdlPSR7cGFnZX1gXG4gICAgKTtcbiAgICBjb25zdCB0b3BNb3ZpZXNJbmZvID0gYXdhaXQgdG9wTW92aWVzUmVzLmpzb24oKTtcbiAgICByZXR1cm4gdG9wTW92aWVzSW5mbztcbiAgfVxuXG4gIGFzeW5jIHRvcFNlcmllcyhwYWdlKSB7XG4gICAgY29uc3QgdG9wU2VyaWVzUmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9kaXNjb3Zlci90dj9hcGlfa2V5PSR7XG4gICAgICAgIHRoaXMuYXBpa2V5XG4gICAgICB9Jmxhbmd1YWdlPWVuLVVTJnNvcnRfYnk9cG9wdWxhcml0eS5kZXNjJnBhZ2U9JHtwYWdlfWBcbiAgICApO1xuXG4gICAgY29uc3QgdG9wU2VyaWVzSW5mbyA9IGF3YWl0IHRvcFNlcmllc1Jlcy5qc29uKCk7XG4gICAgcmV0dXJuIHRvcFNlcmllc0luZm87XG4gIH1cblxuICAvLyEgU0VBUkNIIE1PVklFUyBBTkQgU0VSSUVTXG4gIGFzeW5jIHNlYXJjaENhdGFsb2d1ZSh1c2VyVGV4dCkge1xuICAgIGNvbnN0IHNlYXJjaE1vdmllQ2F0YWxvZ3VlUmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9zZWFyY2gvbW92aWU/YXBpX2tleT0ke1xuICAgICAgICB0aGlzLmFwaWtleVxuICAgICAgfSZsYW5ndWFnZT1lbi1VUyZzb3J0X2J5PXBvcHVsYXJpdHkuZGVzYyZpbmNsdWRlX2FkdWx0PWZhbHNlJnF1ZXJ5PSR7dXNlclRleHR9YFxuICAgICk7XG5cbiAgICBjb25zdCBzZWFyY2hTZXJpZXNDYXRhbG9ndWVSZXMgPSBhd2FpdCBmZXRjaChcbiAgICAgIGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL3NlYXJjaC90dj9hcGlfa2V5PSR7XG4gICAgICAgIHRoaXMuYXBpa2V5XG4gICAgICB9Jmxhbmd1YWdlPWVuLVVTJnNvcnRfYnk9cG9wdWxhcml0eS5kZXNjJmluY2x1ZGVfYWR1bHQ9ZmFsc2UmcXVlcnk9JHt1c2VyVGV4dH1gXG4gICAgKTtcblxuICAgIGNvbnN0IHNlYXJjaE1vdmllQ2F0YWxvZ3VlSW5mbyA9IGF3YWl0IHNlYXJjaE1vdmllQ2F0YWxvZ3VlUmVzLmpzb24oKTtcbiAgICBjb25zdCBzZWFyY2hTZXJpZXNDYXRhbG9ndWVJbmZvID0gYXdhaXQgc2VhcmNoU2VyaWVzQ2F0YWxvZ3VlUmVzLmpzb24oKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzZWFyY2hNb3ZpZUNhdGFsb2d1ZUluZm8sXG4gICAgICBzZWFyY2hTZXJpZXNDYXRhbG9ndWVJbmZvXG4gICAgfTtcbiAgfVxuXG4gIC8vISBHRVQgTU9WSUUgQU5EIFNFUklFUyBBTkQgQ1JFRElUUyBCWSBJRCAgPDw8PCBNT0RBTCA+Pj4+PlxuICBhc3luYyBzZWFyY2hNb3ZpZUlkKGNsaWNrSWQpIHtcbiAgICBjb25zdCBtb3ZpZURldGFpbHNSZXMgPSBhd2FpdCBmZXRjaChcbiAgICAgIGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL21vdmllLyR7Y2xpY2tJZH0/YXBpX2tleT0ke1xuICAgICAgICB0aGlzLmFwaWtleVxuICAgICAgfSZsYW5ndWFnZT1lbi1VUyZhcHBlbmRfdG9fcmVzcG9uc2U9dmlkZW9zLHNpbWlsYXJgXG4gICAgKTtcblxuICAgIGNvbnN0IG1vdmllQ2FzdFJlcyA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvbW92aWUvJHtjbGlja0lkfS9jcmVkaXRzP2FwaV9rZXk9JHtcbiAgICAgICAgdGhpcy5hcGlrZXlcbiAgICAgIH0mbGFuZ3VhZ2U9ZW4tVVNgXG4gICAgKTtcblxuICAgIGNvbnN0IG1vdmllRGV0YWlsc0luZm8gPSBhd2FpdCBtb3ZpZURldGFpbHNSZXMuanNvbigpO1xuICAgIGNvbnN0IG1vdmllQ2FzdEluZm8gPSBhd2FpdCBtb3ZpZUNhc3RSZXMuanNvbigpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1vdmllRGV0YWlsc0luZm8sXG4gICAgICBtb3ZpZUNhc3RJbmZvXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHNlYXJjaFNlcmllSWQoY2xpY2tJZCkge1xuICAgIGNvbnN0IHNlcmllRGV0YWlsc1JlcyA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvdHYvJHtjbGlja0lkfT9hcGlfa2V5PSR7XG4gICAgICAgIHRoaXMuYXBpa2V5XG4gICAgICB9Jmxhbmd1YWdlPWVuLVVTJmFwcGVuZF90b19yZXNwb25zZT12aWRlb3Msc2ltaWxhcixjcmVkaXRzYFxuICAgICk7XG5cbiAgICBjb25zdCBzZXJpZURldGFpbHNJbmZvID0gYXdhaXQgc2VyaWVEZXRhaWxzUmVzLmpzb24oKTtcbiAgICByZXR1cm4gc2VyaWVEZXRhaWxzSW5mbztcbiAgfVxuXG4gIC8vISBHRVQgVEhFIEdFTlJFU1xuICBhc3luYyBnZW5yZUxpc3RNb3ZpZXMoKSB7XG4gICAgY29uc3QgZ2VucmVMaXN0TW92aWVzUmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9nZW5yZS9tb3ZpZS9saXN0P2FwaV9rZXk9ZmRkZTg1NWNkNGIwNDdmYjFhMGVhMjRhN2VjNTgzNjImbGFuZ3VhZ2U9ZW4tVVNgXG4gICAgKTtcblxuICAgIGNvbnN0IGdlbnJlTGlzdE1vdmllc0luZm8gPSBhd2FpdCBnZW5yZUxpc3RNb3ZpZXNSZXMuanNvbigpO1xuICAgIHJldHVybiBnZW5yZUxpc3RNb3ZpZXNJbmZvO1xuICB9XG5cbiAgYXN5bmMgZ2VucmVMaXN0U2VyaWVzKCkge1xuICAgIGNvbnN0IGdlbnJlTGlzdFNlcmllc1JlcyA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvZ2VucmUvdHYvbGlzdD9hcGlfa2V5PWZkZGU4NTVjZDRiMDQ3ZmIxYTBlYTI0YTdlYzU4MzYyJmxhbmd1YWdlPWVuLVVTYFxuICAgICk7XG5cbiAgICBjb25zdCBnZW5yZUxpc3RTZXJpZXNJbmZvID0gYXdhaXQgZ2VucmVMaXN0U2VyaWVzUmVzLmpzb24oKTtcbiAgICByZXR1cm4gZ2VucmVMaXN0U2VyaWVzSW5mbztcbiAgfVxuXG4gIC8vISBNT1ZJRVMgQU5EIFNFUklFUyBCWSBHRU5SRVxuICBhc3luYyBtb3ZpZUdlbnJlKHBhZ2UsIGdlbnJlSWQpIHtcbiAgICBjb25zdCBtb3ZpZUdlbnJlUmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9kaXNjb3Zlci9tb3ZpZT9hcGlfa2V5PSR7XG4gICAgICAgIHRoaXMuYXBpa2V5XG4gICAgICB9Jmxhbmd1YWdlPWVuLVVTJnNvcnRfYnk9cG9wdWxhcml0eS5kZXNjJmluY2x1ZGVfYWR1bHQ9ZmFsc2UmaW5jbHVkZV92aWRlbz1mYWxzZSZwYWdlPSR7cGFnZX0md2l0aF9nZW5yZXM9JHtnZW5yZUlkfWBcbiAgICApO1xuXG4gICAgY29uc3QgbW92aWVHZW5yZUluZm8gPSBhd2FpdCBtb3ZpZUdlbnJlUmVzLmpzb24oKTtcbiAgICByZXR1cm4gbW92aWVHZW5yZUluZm87XG4gIH1cblxuICBhc3luYyBzZXJpZUdlbnJlKHBhZ2UsIGdlbnJlSWQpIHtcbiAgICBjb25zdCBzZXJpZUdlbnJlUmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9kaXNjb3Zlci90dj9hcGlfa2V5PSR7XG4gICAgICAgIHRoaXMuYXBpa2V5XG4gICAgICB9Jmxhbmd1YWdlPWVuLVVTJnNvcnRfYnk9cG9wdWxhcml0eS5kZXNjJnBhZ2U9JHtwYWdlfSZ3aXRoX2dlbnJlcz0ke2dlbnJlSWR9YFxuICAgICk7XG5cbiAgICBjb25zdCBzZXJpZUdlbnJlSW5mbyA9IGF3YWl0IHNlcmllR2VucmVSZXMuanNvbigpO1xuICAgIHJldHVybiBzZXJpZUdlbnJlSW5mbztcbiAgfVxuXG4gIC8vISBBQ1RPUiBERVRBSUxTXG4gIGFzeW5jIGdldEFjdG9ycyhhY3RvcklkKSB7XG4gICAgY29uc3QgZ2V0QWN0b3JzUmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9wZXJzb24vJHthY3RvcklkfT9hcGlfa2V5PWZkZGU4NTVjZDRiMDQ3ZmIxYTBlYTI0YTdlYzU4MzYyJmxhbmd1YWdlPWVuLVVTJmFwcGVuZF90b19yZXNwb25zZT1jb21iaW5lZF9jcmVkaXRzLGV4dGVybmFsX2lkcyxpbWFnZXNgXG4gICAgKTtcblxuICAgIGNvbnN0IGdldEFjdG9yc0luZm8gPSBhd2FpdCBnZXRBY3RvcnNSZXMuanNvbigpO1xuICAgIHJldHVybiBnZXRBY3RvcnNJbmZvO1xuICB9XG59XG4iLCJjbGFzcyBVSSB7XG4gIC8vISBUT1AgUkFURUQgU0VDVElPTlxuICBwcmludE1vdmllcyh0b3BNb3ZpZXNSZXMpIHtcbiAgICBsZXQgb3V0cHV0ID0gJyc7XG5cbiAgICBjb25zdCB0b3BNb3ZpZXMgPSB0b3BNb3ZpZXNSZXMucmVzdWx0cztcbiAgICBjb25zdCBmaWx0ZXJlZE1vdmllcyA9IHRvcE1vdmllcy5yZWR1Y2UoXG4gICAgICAoYWNjLCBtb3ZpZSkgPT4ge1xuICAgICAgICBpZiAobW92aWUuYmFja2Ryb3BfcGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgbW92aWUucmVqZWN0aW9uUmVhc29uID0gJ25vIGJhY2tkcm9wJztcbiAgICAgICAgICBhY2MucmVqZWN0cy5wdXNoKG1vdmllKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3ZpZS5wb3N0ZXJfcGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgbW92aWUucmVqZWN0aW9uUmVhc29uID0gJ25vIHBob3RvJztcbiAgICAgICAgICBhY2MucmVqZWN0cy5wdXNoKG1vdmllKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3ZpZS5wb3B1bGFyaXR5IDwgNCkge1xuICAgICAgICAgIG1vdmllLnJlamVjdGlvblJlYXNvbiA9ICdiYWQgcmF0aW5nJztcbiAgICAgICAgICBhY2MucmVqZWN0cy5wdXNoKG1vdmllKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGFjYy5tYXRjaGVzLnB1c2gobW92aWUpO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHsgbWF0Y2hlczogW10sIHJlamVjdHM6IFtdIH1cbiAgICApO1xuXG4gICAgZmlsdGVyZWRNb3ZpZXMubWF0Y2hlcy5mb3JFYWNoKG1vdmllID0+IHtcbiAgICAgIGxldCBpbWcgPSBtb3ZpZS5wb3N0ZXJfcGF0aDtcbiAgICAgIGNvbnN0IHRpdGxlID0gbW92aWUudGl0bGU7XG4gICAgICBjb25zdCBkYXRlID0gbW92aWUucmVsZWFzZV9kYXRlLnN1YnN0cmluZygwLCA0KTtcbiAgICAgIGNvbnN0IHZvdGVzID0gbW92aWUudm90ZV9hdmVyYWdlO1xuICAgICAgY29uc3QgaWQgPSBtb3ZpZS5pZDtcblxuICAgICAgb3V0cHV0ID0gYFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQtaXRlbSBjb2wtNiBjb2wtc20tNCBjb2wtbWQtMyBjb2wtbGctMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncmlkLWl0ZW0tY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3c1MDAvJHtpbWd9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCIke2lkfVwiIGNsYXNzPVwib3ZlcmxheVwiIGRhdGEtaWQ9XCJtb3ZpZVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ2FsbC10ZXh0IHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgaWQ9XCIke2lkfVwiIGNsYXNzPVwiY29udGVudC10aXRsZVwiIGRhdGEtaWQ9XCJtb3ZpZVwiPiR7dGl0bGV9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiJHtpZH1cIiBkYXRhLWlkPVwibW92aWVcIj48aSBjbGFzcz1cImZhcyBmYS1oZWFydCBmYS1zbVwiPjwvaT4gJHt2b3Rlc30gaGVhcnRzPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cIiR7aWR9XCIgZGF0YS1pZD1cIm1vdmllXCI+JHtkYXRlfTwvc3Bhbj4gIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBgO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQnKS5pbm5lckhUTUwgKz0gb3V0cHV0O1xuICAgIH0pO1xuICB9XG5cbiAgcHJpbnRTZXJpZXModG9wU2VyaWVzUmVzKSB7XG4gICAgbGV0IG91dHB1dCA9ICcnO1xuXG4gICAgY29uc3QgdG9wU2VyaWVzID0gdG9wU2VyaWVzUmVzLnJlc3VsdHM7XG4gICAgY29uc3QgZmlsdGVyZWRTZXJpZXMgPSB0b3BTZXJpZXMucmVkdWNlKFxuICAgICAgKGFjYywgc2VyaWUpID0+IHtcbiAgICAgICAgaWYgKHNlcmllLmJhY2tkcm9wX3BhdGggPT0gbnVsbCkge1xuICAgICAgICAgIHNlcmllLnJlamVjdGlvblJlYXNvbiA9ICdubyBiYWNrZHJvcCc7XG4gICAgICAgICAgYWNjLnJlamVjdHMucHVzaChzZXJpZSk7XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VyaWUucG9zdGVyX3BhdGggPT0gbnVsbCkge1xuICAgICAgICAgIHNlcmllLnJlamVjdGlvblJlYXNvbiA9ICdubyBwaG90byc7XG4gICAgICAgICAgYWNjLnJlamVjdHMucHVzaChzZXJpZSk7XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VyaWUucG9wdWxhcml0eSA8IDQpIHtcbiAgICAgICAgICBzZXJpZS5yZWplY3Rpb25SZWFzb24gPSAnYmFkIHJhdGluZyc7XG4gICAgICAgICAgYWNjLnJlamVjdHMucHVzaChzZXJpZSk7XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfVxuICAgICAgICBhY2MubWF0Y2hlcy5wdXNoKHNlcmllKTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sXG4gICAgICB7IG1hdGNoZXM6IFtdLCByZWplY3RzOiBbXSB9XG4gICAgKTtcblxuICAgIGZpbHRlcmVkU2VyaWVzLm1hdGNoZXMuZm9yRWFjaChzZXJpZSA9PiB7XG4gICAgICBsZXQgaW1nID0gc2VyaWUucG9zdGVyX3BhdGg7XG4gICAgICBjb25zdCBuYW1lID0gc2VyaWUubmFtZTtcbiAgICAgIGNvbnN0IGRhdGUgPSBzZXJpZS5maXJzdF9haXJfZGF0ZS5zdWJzdHJpbmcoMCwgNCk7XG4gICAgICBjb25zdCB2b3RlcyA9IHNlcmllLnZvdGVfYXZlcmFnZTtcbiAgICAgIGNvbnN0IGlkID0gc2VyaWUuaWQ7XG5cbiAgICAgIG91dHB1dCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQtaXRlbSBjb2wtNiBjb2wtc20tNCBjb2wtbWQtMyBjb2wtbGctMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQtaXRlbS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlLnRtZGIub3JnL3QvcC93NTAwLyR7aW1nfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCIke2lkfVwiIGNsYXNzPVwib3ZlcmxheVwiIGRhdGEtaWQ9XCJzZXJpZVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ2FsbC10ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgaWQ9XCIke2lkfVwiIGNsYXNzPVwiY29udGVudC10aXRsZVwiIGRhdGEtaWQ9XCJzZXJpZVwiPiR7bmFtZX08L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCIke2lkfVwiIGRhdGEtaWQ9XCJzZXJpZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWhlYXJ0IGZhLXNtXCI+PC9pPiAke3ZvdGVzfSBoZWFydHM8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxicj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiJHtpZH1cIiBkYXRhLWlkPVwic2VyaWVcIj4ke2RhdGV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQnKS5pbm5lckhUTUwgKz0gb3V0cHV0O1xuICAgIH0pO1xuICB9XG5cbiAgLy8hIFNFQVJDSCBTRUNUSU9OXG4gIHByaW50U2VhcmNoQ2F0KHNlYXJjaENhdGFsb2d1ZVJlcykge1xuICAgIGxldCBvdXRwdXQgPSAnJztcblxuICAgIGNvbnN0IHNlYXJjaFF1ZXJ5TW92aWUgPVxuICAgICAgc2VhcmNoQ2F0YWxvZ3VlUmVzLnNlYXJjaE1vdmllQ2F0YWxvZ3VlSW5mby5yZXN1bHRzO1xuICAgIGNvbnN0IGZpbHRlcmVkTW92aWVzID0gc2VhcmNoUXVlcnlNb3ZpZS5yZWR1Y2UoXG4gICAgICAoYWNjLCBtb3ZpZSkgPT4ge1xuICAgICAgICBpZiAobW92aWUuYmFja2Ryb3BfcGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgbW92aWUucmVqZWN0aW9uUmVhc29uID0gJ25vIGJhY2tkcm9wJztcbiAgICAgICAgICBhY2MucmVqZWN0cy5wdXNoKG1vdmllKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3ZpZS5wb3N0ZXJfcGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgbW92aWUucmVqZWN0aW9uUmVhc29uID0gJ25vIHBob3RvJztcbiAgICAgICAgICBhY2MucmVqZWN0cy5wdXNoKG1vdmllKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3ZpZS5wb3B1bGFyaXR5IDwgNCkge1xuICAgICAgICAgIG1vdmllLnJlamVjdGlvblJlYXNvbiA9ICdiYWQgcmF0aW5nJztcbiAgICAgICAgICBhY2MucmVqZWN0cy5wdXNoKG1vdmllKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGFjYy5tYXRjaGVzLnB1c2gobW92aWUpO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHsgbWF0Y2hlczogW10sIHJlamVjdHM6IFtdIH1cbiAgICApO1xuXG4gICAgZmlsdGVyZWRNb3ZpZXMubWF0Y2hlcy5mb3JFYWNoKG1vdmllID0+IHtcbiAgICAgIGNvbnN0IGltZyA9IG1vdmllLnBvc3Rlcl9wYXRoO1xuICAgICAgY29uc3QgdGl0bGUgPSBtb3ZpZS50aXRsZTtcbiAgICAgIGNvbnN0IGRhdGUgPSBtb3ZpZS5yZWxlYXNlX2RhdGUuc3Vic3RyaW5nKDAsIDQpO1xuICAgICAgY29uc3Qgdm90ZXMgPSBtb3ZpZS52b3RlX2F2ZXJhZ2U7XG4gICAgICBjb25zdCBpZCA9IG1vdmllLmlkO1xuXG4gICAgICBvdXRwdXQgKz0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZC1pdGVtIGNvbC02IGNvbC1zbS00IGNvbC1tZC0zIGNvbC1sZy0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZC1pdGVtLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3c1MDAvJHtpbWd9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cIiR7aWR9XCIgY2xhc3M9XCJvdmVybGF5XCIgZGF0YS1pZD1cIm1vdmllXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJnYWxsLXRleHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBpZD1cIiR7aWR9XCIgY2xhc3M9XCJjb250ZW50LXRpdGxlXCIgZGF0YS1pZD1cIm1vdmllXCI+JHt0aXRsZX08L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCIke2lkfVwiIGRhdGEtaWQ9XCJtb3ZpZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWhlYXJ0IGZhLXNtXCI+PC9pPiAke3ZvdGVzfSBoZWFydHM8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxicj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiJHtpZH1cIiBkYXRhLWlkPVwibW92aWVcIj4ke2RhdGV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gICAgXG4gICAgICAgICAgICAgICAgYDtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkJykuaW5uZXJIVE1MID0gb3V0cHV0O1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2VhcmNoUXVlcnlTZXJpZSA9XG4gICAgICBzZWFyY2hDYXRhbG9ndWVSZXMuc2VhcmNoU2VyaWVzQ2F0YWxvZ3VlSW5mby5yZXN1bHRzO1xuICAgIGNvbnN0IGZpbHRlcmVkU2VyaWVzID0gc2VhcmNoUXVlcnlTZXJpZS5yZWR1Y2UoXG4gICAgICAoYWNjLCBzZXJpZSkgPT4ge1xuICAgICAgICBpZiAoc2VyaWUuYmFja2Ryb3BfcGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgc2VyaWUucmVqZWN0aW9uUmVhc29uID0gJ25vIGJhY2tkcm9wJztcbiAgICAgICAgICBhY2MucmVqZWN0cy5wdXNoKHNlcmllKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXJpZS5wb3N0ZXJfcGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgc2VyaWUucmVqZWN0aW9uUmVhc29uID0gJ25vIHBob3RvJztcbiAgICAgICAgICBhY2MucmVqZWN0cy5wdXNoKHNlcmllKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXJpZS5wb3B1bGFyaXR5IDwgNCkge1xuICAgICAgICAgIHNlcmllLnJlamVjdGlvblJlYXNvbiA9ICdiYWQgcmF0aW5nJztcbiAgICAgICAgICBhY2MucmVqZWN0cy5wdXNoKHNlcmllKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGFjYy5tYXRjaGVzLnB1c2goc2VyaWUpO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHsgbWF0Y2hlczogW10sIHJlamVjdHM6IFtdIH1cbiAgICApO1xuXG4gICAgZmlsdGVyZWRTZXJpZXMubWF0Y2hlcy5mb3JFYWNoKHNlcmllID0+IHtcbiAgICAgIGNvbnN0IGltZyA9IHNlcmllLnBvc3Rlcl9wYXRoO1xuICAgICAgY29uc3QgbmFtZSA9IHNlcmllLm5hbWU7XG4gICAgICBjb25zdCBkYXRlID0gc2VyaWUuZmlyc3RfYWlyX2RhdGUuc3Vic3RyaW5nKDAsIDQpO1xuICAgICAgY29uc3Qgdm90ZXMgPSBzZXJpZS52b3RlX2F2ZXJhZ2U7XG4gICAgICBjb25zdCBpZCA9IHNlcmllLmlkO1xuXG4gICAgICBvdXRwdXQgKz0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZC1pdGVtIGNvbC02IGNvbC1zbS00IGNvbC1tZC0zIGNvbC1sZy0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQtaXRlbS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZS50bWRiLm9yZy90L3AvdzUwMC8ke2ltZ31cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cIiR7aWR9XCIgY2xhc3M9XCJvdmVybGF5XCIgZGF0YS1pZD1cInNlcmllXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ2FsbC10ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGlkPVwiJHtpZH1cIiBjbGFzcz1cImNvbnRlbnQtdGl0bGVcIiBkYXRhLWlkPVwic2VyaWVcIj4ke25hbWV9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cIiR7aWR9XCIgZGF0YS1pZD1cInNlcmllXCI+PGkgY2xhc3M9XCJmYXMgZmEtaGVhcnQgZmEtc21cIj48L2k+ICR7dm90ZXN9IGhlYXJ0czxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxicj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cIiR7aWR9XCIgZGF0YS1pZD1cInNlcmllXCI+JHtkYXRlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAgIFxuICAgICAgICAgICAgICAgICAgICBgO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQnKS5pbm5lckhUTUwgPSBvdXRwdXQ7XG4gICAgfSk7XG4gIH1cblxuICAvLyAvLyEgTU9EQUwgU0VDVElPTlxuICBwcmludE1vZGFsTW92aWUoc2VhcmNoTW92aWVJZFJlcykge1xuICAgIC8vcHJldmVudCBzY3JvbGxpbmcgdW5kZXIgdGhlIG1vZGFsXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICAvL3Nob3J0Y3V0IGZpbmQgY2FzdFxuICAgIGNvbnN0IGNhc3RJbmZvID0gc2VhcmNoTW92aWVJZFJlcy5tb3ZpZUNhc3RJbmZvO1xuICAgIC8vIGdldCBvbmx5IHRoZSBmaXJzdCAxMCBhY3RvcnNcbiAgICBjb25zdCBjYXN0ID0gY2FzdEluZm8uY2FzdC5zbGljZSgwLCAxMCk7XG5cbiAgICAvL2xvb3AgdGhyb3VnaCB0aGUgY2FzdCBhbmQgb3V0cHV0IGl0IGFzIG9uZSBzdHJpbmdcbiAgICBsZXQgYWN0b3JzID0gJyc7XG4gICAgY2FzdC5mb3JFYWNoKGNhc3QgPT4ge1xuICAgICAgYWN0b3JzICs9IGBcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiMhXCIgY2xhc3M9XCJhY3RvclwiIGRhdGEtYWN0b3I9XCIke1xuICAgICAgICAgICAgICAgICAgICAgIGNhc3QuaWRcbiAgICAgICAgICAgICAgICAgICAgfVwiIG9uY2xpY2s9XCJwcmludEFjdG9yKGV2ZW50KVwiPiR7Y2FzdC5uYW1lfTwvYT5cbiAgICAgICAgICAgICAgICBgO1xuICAgIH0pO1xuXG4gICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBnZW5yZXMgYW5kIHByaW50IGluZGl2aWR1YWx5XG4gICAgY29uc3QgZ2V0R2VucmUgPSBzZWFyY2hNb3ZpZUlkUmVzLm1vdmllRGV0YWlsc0luZm8uZ2VucmVzO1xuICAgIGxldCBnZW5yZXMgPSAnJztcblxuICAgIGdldEdlbnJlLmZvckVhY2goZ2VucmUgPT4ge1xuICAgICAgZ2VucmVzICs9IGBcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXBpbGwgYmFkZ2UtbGlnaHRcIj4ke2dlbnJlLm5hbWV9PC9zcGFuPiBcbiAgICAgICAgICAgIGA7XG4gICAgfSk7XG5cbiAgICAvL3Nob3J0Y3V0IGZpbmQgbW92aWUgZGV0YWlsc1xuICAgIGNvbnN0IG1vdmllSW5mbyA9IHNlYXJjaE1vdmllSWRSZXMubW92aWVEZXRhaWxzSW5mbztcblxuICAgIGNvbnN0IGJEcm9wID0gbW92aWVJbmZvLmJhY2tkcm9wX3BhdGgsXG4gICAgICBidWRnZXQgPSBtb3ZpZUluZm8uYnVkZ2V0LFxuICAgICAgc2l0ZSA9IG1vdmllSW5mby5ob21lcGFnZSxcbiAgICAgIGltZGIgPSBtb3ZpZUluZm8uaW1kYl9pZCxcbiAgICAgIGxhbmcgPSBtb3ZpZUluZm8ub3JpZ2luYWxfbGFuZ3VhZ2UsXG4gICAgICB0aXRsZSA9IG1vdmllSW5mby50aXRsZSxcbiAgICAgIG92ZXJ2aWV3ID0gbW92aWVJbmZvLm92ZXJ2aWV3LFxuICAgICAgcG9wID0gbW92aWVJbmZvLnBvcHVsYXJpdHksXG4gICAgICBpbWcgPSBtb3ZpZUluZm8ucG9zdGVyX3BhdGgsXG4gICAgICBkYXRlID0gbW92aWVJbmZvLnJlbGVhc2VfZGF0ZS5zdWJzdHJpbmcoMCwgNCksXG4gICAgICBydW4gPSBtb3ZpZUluZm8ucnVudGltZSxcbiAgICAgIHRhZyA9IG1vdmllSW5mby50YWdsaW5lLFxuICAgICAgdm90ZXMgPSBtb3ZpZUluZm8udm90ZV9hdmVyYWdlO1xuXG4gICAgbGV0IG91dHB1dCA9ICcnO1xuXG4gICAgb3V0cHV0ID0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibXlNb2RhbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXIgZmEtdGltZXMtY2lyY2xlXCIgaWQ9XCJjbG9zZS1tb2RhbFwiIG9uY2xpY2s9XCJjbG9zZU1vZGFsKClcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cDovL3d3dy5pbWRiLmNvbS90aXRsZS8ke2ltZGJ9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+PGkgY2xhc3M9XCJmYWIgZmEtaW1kYlwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cDovL3d3dy5hbWF6b24uY29tL3MvcmVmPW5iX3NzX2Q/dGFnPWNocmlzY295aWVyLTIwJnVybD1zZWFyY2gtYWxpYXMlM0RkdmQmZmllbGQta2V5d29yZHM9JHt0aXRsZX1cIiB0YXJnZXQ9XCJfYmxhbmtcIj48aSBjbGFzcz1cImZhYiBmYS1hbWF6b25cIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHA6Ly93d3cubmV0ZmxpeC5jb20vU2VhcmNoP2xua2N0cj1zcmNocmQtaXBzJnYxPSR7dGl0bGV9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+PHNwYW4gY2xhc3M9XCJpY29uLW5ldGZsaXhcIj48L3NwYW4+PC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7c2l0ZX1cIiB0YXJnZXQ9XCJfYmxhbmtcIj48aSBjbGFzcz1cImZhcyBmYS1nbG9iZVwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTEyIHRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwibW9kYWwtdGl0bGVcIj4ke3RpdGxlfTwvaDI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj4ke3RhZ308L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTggbWwtYXV0byB0ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJvdmVydmlld1wiPjxzcGFuPk92ZXJ2aWV3Ojwvc3Bhbj4gJHtvdmVydmlld308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNiBtbC1hdXRvIHRleHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImFjdG9yc1wiPjxzcGFuPkNhc3Q6PC9zcGFuPiAke2FjdG9yc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5pbm5lcldpZHRoID49IDM3NlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYDxkaXYgY2xhc3M9XCJjb2wtbWQtNSBtbC1hdXRvIGxpc3RcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImxpc3QtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gdGl0bGVcIj5Nb3ZpZSBJbmZvOjwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIG1sLTVcIj48cD5MYW5ndWFnZTogPHNwYW4+JHtsYW5nfTwvc3Bhbj48L3A+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gbWwtNVwiPjxwPlJlbGVhc2UgRGF0ZTogPHNwYW4+JHtkYXRlfTwvc3Bhbj48L3A+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gbWwtNVwiPjxwPlJ1bnRpbWU6IDxzcGFuPiR7cnVufTwvc3Bhbj4gbWludXRlczwvcD48L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBtbC01XCI+PHA+UG9wdWxhcml0eTogPHNwYW4+PGkgY2xhc3M9XCJmYXMgZmEtaGVhcnQgZmEtc21cIj48L2k+ICR7dm90ZXN9PC9zcGFuPiB2b3RlcyAoJHtwb3B9KTwvcD48L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBtbC01XCI+PHA+QnVkZ2V0OiAkPHNwYW4+JHtidWRnZXR9PC9zcGFuPjwvcD48L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC01IG1sLWF1dG8gZ2VucmVzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1sLTVcIj4ke2dlbnJlc308L2Rpdj4gXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hNb3ZpZUlkUmVzLm1vdmllRGV0YWlsc0luZm8udmlkZW9zLnJlc3VsdHMgPCAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYDxkaXYgY2xhc3M9XCJjb2wtbWQtNSBtbC1hdXRvIGdlbnJlc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tb3V0bGluZS1saWdodCB0cmFpbGVyLWJ0blwiIG9uY2xpY2s9XCJvcGVuVmlkZW8oKVwiPlRyYWlsZXI8L2J1dHRvbj4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMiBteC1hdXRvIHZpZGVvLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIHNyYz1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLyR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aWVJbmZvLnZpZGVvcy5yZXN1bHRzWzBdLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9P2VuYWJsZWpzYXBpPTEmZnM9MCZpdl9sb2FkX3BvbGljeT0zJnJlbD0wJnNob3dpbmZvPTBcIiBpZD1cInRyYWlsZXItcGxheWVyXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuIGNsYXNzPVwidmlkZW9cIj48L2lmcmFtZT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IGBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaE1vdmllSWRSZXMubW92aWVEZXRhaWxzSW5mby5zaW1pbGFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXN1bHRzIDwgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJteC1hdXRvIGNvbC1tZC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1saWdodCBzaW1pbGFyLWJ0blwiIG9uY2xpY2s9XCJ1aS5vcGVuU2ltaWxhcigpXCI+IFNpbWlsYXI8L2J1dHRvbj4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZCBjYXJvdXNlbC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByaW50LXNsaWNrXCIgb25jbGljaz1cInByaW50U2ltaWxhcihldmVudClcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250YWluZXInKS5pbm5lckhUTUwgPSBvdXRwdXQ7XG5cbiAgICAvLyBzZXQgYmFja2dyb3VuZCBpbiBDU1NcbiAgICBjb25zdCBtb2RhbEJnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm15TW9kYWwnKTtcbiAgICBtb2RhbEJnLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGBsaW5lYXItZ3JhZGllbnQoNDVkZWcsIHJnYmEoMCwwLDAsMSkgMCUscmdiYSgwLDAsMCwxKSAxNSUscmdiYSgyNTUsMjU1LDI1NSwuMTUpIDE1JSxyZ2JhKDAsMCwwLDApIDQwJSxyZ2JhKDAsMCwwLDAuNzUpIDQwJSxyZ2JhKDAsMCwwLDAuNzUpIDEwMCUpLCB1cmwoaHR0cHM6Ly9pbWFnZS50bWRiLm9yZy90L3AvdzEyODAvJHtiRHJvcH0pYDtcblxuICAgIC8vIFRlbGwgeW91dHViZSBBUEkgdG8gbG9hZCBwbGF5ZXJcbiAgICBsb2FkWVRwbGF5ZXIoKTtcbiAgfVxuXG4gIHByaW50TW9kYWxTZXJpZShzZWFyY2hTZXJpZUlkUmVzKSB7XG4gICAgLy9wcmV2ZW50IHNjcm9sbGluZyB1bmRlciB0aGUgbW9kYWxcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jykuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblxuICAgIGNvbnN0IGNhc3QgPSBzZWFyY2hTZXJpZUlkUmVzLmNyZWRpdHMuY2FzdC5zbGljZSgwLCAxMCk7XG5cbiAgICBsZXQgYWN0b3JzID0gJyc7XG4gICAgY2FzdC5mb3JFYWNoKGNhc3QgPT4ge1xuICAgICAgYWN0b3JzICs9IGBcbiAgICAgICAgICAgIDxhIGhyZWY9XCIjIVwiIGNsYXNzPVwiYWN0b3JcIiBkYXRhLWFjdG9yPVwiJHtcbiAgICAgICAgICAgICAgY2FzdC5pZFxuICAgICAgICAgICAgfVwiIG9uY2xpY2s9XCJwcmludEFjdG9yKGV2ZW50KVwiPiR7Y2FzdC5uYW1lfTwvYT5cbiAgICAgICAgICAgIGA7XG4gICAgfSk7XG5cbiAgICBjb25zdCBnZXRDcmVhdG9ycyA9IHNlYXJjaFNlcmllSWRSZXMuY3JlYXRlZF9ieTtcbiAgICBsZXQgY3JlYXRvcnMgPSAnJztcbiAgICBnZXRDcmVhdG9ycy5mb3JFYWNoKHBlcnNvbiA9PiB7XG4gICAgICBjcmVhdG9ycyArPSBwZXJzb24ubmFtZSArICcsICc7XG4gICAgfSk7XG5cbiAgICAvLyBsb29wIHRocm91Z2ggdGhlIGdlbnJlcyBhbmQgcHJpbnQgaW5kaXZpZHVhbHlcbiAgICBjb25zdCBnZXRHZW5yZSA9IHNlYXJjaFNlcmllSWRSZXMuZ2VucmVzO1xuICAgIGxldCBnZW5yZXMgPSAnJztcbiAgICBnZXRHZW5yZS5mb3JFYWNoKGdlbnJlID0+IHtcbiAgICAgIGdlbnJlcyArPSBgXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS1waWxsIGJhZGdlLWxpZ2h0XCI+JHtnZW5yZS5uYW1lfTwvc3Bhbj4gXG4gICAgICAgICAgICBgO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYkRyb3AgPSBzZWFyY2hTZXJpZUlkUmVzLmJhY2tkcm9wX3BhdGgsXG4gICAgICBuYW1lID0gc2VhcmNoU2VyaWVJZFJlcy5uYW1lLFxuICAgICAgc2l0ZSA9IHNlYXJjaFNlcmllSWRSZXMuaG9tZXBhZ2UsXG4gICAgICBsYW5nID0gc2VhcmNoU2VyaWVJZFJlcy5vcmlnaW5hbF9sYW5ndWFnZSxcbiAgICAgIG92ZXJ2aWV3ID0gc2VhcmNoU2VyaWVJZFJlcy5vdmVydmlldyxcbiAgICAgIHBvcCA9IHNlYXJjaFNlcmllSWRSZXMucG9wdWxhcml0eSxcbiAgICAgIHZvdGVzID0gc2VhcmNoU2VyaWVJZFJlcy52b3RlX2F2ZXJhZ2UsXG4gICAgICBmaXJzdEQgPSBzZWFyY2hTZXJpZUlkUmVzLmZpcnN0X2Fpcl9kYXRlLnN1YnN0cmluZygwLCA0KSxcbiAgICAgIGxhc3REID0gc2VhcmNoU2VyaWVJZFJlcy5sYXN0X2Fpcl9kYXRlLFxuICAgICAgaWQgPSBzZWFyY2hTZXJpZUlkUmVzLmlkO1xuXG4gICAgbGV0IG91dHB1dCA9ICcnO1xuXG4gICAgb3V0cHV0ID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm15TW9kYWxcIj5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFyIGZhLXRpbWVzLWNpcmNsZVwiIGlkPVwiY2xvc2UtbW9kYWxcIiBvbmNsaWNrPVwiY2xvc2VNb2RhbCgpXCI+PC9pPlxuICAgICAgICAgICAgPGEgaHJlZj1cImh0dHA6Ly93d3cuaW1kYi5jb20vZmluZD9zPXR0JnE9JHtuYW1lfVwiIHRhcmdldD1cIl9ibGFua1wiPjxpIGNsYXNzPVwiZmFiIGZhLWltZGJcIj48L2k+PC9hPlxuICAgICAgICAgICAgPGEgaHJlZj1cImh0dHA6Ly93d3cuYW1hem9uLmNvbS9zL3JlZj1uYl9zc19kP3RhZz1jaHJpc2NveWllci0yMCZ1cmw9c2VhcmNoLWFsaWFzJTNEZHZkJmZpZWxkLWtleXdvcmRzPSR7bmFtZX1cIiB0YXJnZXQ9XCJfYmxhbmtcIj48aSBjbGFzcz1cImZhYiBmYS1hbWF6b25cIj48L2k+PC9hPlxuICAgICAgICAgICAgPGEgaHJlZj1cImh0dHA6Ly93d3cubmV0ZmxpeC5jb20vU2VhcmNoP2xua2N0cj1zcmNocmQtaXBzJnYxPSR7bmFtZX1cIiB0YXJnZXQ9XCJfYmxhbmtcIj48c3BhbiBjbGFzcz1cImljb24tbmV0ZmxpeFwiPjwvc3Bhbj48L2E+XG4gICAgICAgICAgICA8YSBocmVmPVwiJHtzaXRlfVwiIHRhcmdldD1cIl9ibGFua1wiPjxpIGNsYXNzPVwiZmFzIGZhLWdsb2JlXCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTEyIHRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+JHtuYW1lfTwvaDI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC04IG1sLWF1dG8gdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cIm92ZXJ2aWV3XCI+PHNwYW4+T3ZlcnZpZXc6PC9zcGFuPiAke292ZXJ2aWV3fTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgbWwtYXV0byB0ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiYWN0b3JzXCI+PHNwYW4+Q2FzdDo8L3NwYW4+ICR7YWN0b3JzfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTUgbWwtYXV0byBsaXN0XCI+XG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwibGlzdC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gdGl0bGVcIj5TZXJpZXMgSW5mbzo8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gbWwtNVwiPjxwPkNyZWF0b3JzOiA8c3Bhbj4ke2NyZWF0b3JzfTwvc3Bhbj48L3A+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIG1sLTVcIj48cD5OZXR3b3JrOiA8c3Bhbj4ke1xuICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFNlcmllSWRSZXMubmV0d29ya3NbMF0ubmFtZVxuICAgICAgICAgICAgICAgICAgICB9PC9zcGFuPjwvcD48L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gbWwtNVwiPjxwPkxhbmd1YWdlOiA8c3Bhbj4ke2xhbmd9PC9zcGFuPjwvcD48L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gbWwtNVwiPjxwPlNlcmllcyBTdGFydGVkOiA8c3Bhbj4ke2ZpcnN0RH08L3NwYW4+IExhdGVzdCBBaXIgRGF0ZTogPHNwYW4+JHtsYXN0RH08L3NwYW4+PC9wPjwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBtbC01XCI+PHA+UnVudGltZTogfiA8c3Bhbj4ke1xuICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFNlcmllSWRSZXMuZXBpc29kZV9ydW5fdGltZVswXVxuICAgICAgICAgICAgICAgICAgICB9PC9zcGFuPiBtaW51dGVzPC9wPjwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBtbC01XCI+PHA+UG9wdWxhcml0eTogPHNwYW4+PGkgY2xhc3M9XCJmYXMgZmEtaGVhcnQgZmEtc21cIj48L2k+ICR7dm90ZXN9PC9zcGFuPiB2b3RlcyAoJHtwb3B9KTwvcD48L2xpPlxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC01IG1sLWF1dG8gZ2VucmVzXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtbC01XCI+JHtnZW5yZXN9PC9kaXY+IFxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICBzZWFyY2hTZXJpZUlkUmVzLnZpZGVvcy5yZXN1bHRzIDwgMVxuICAgICAgICAgICAgICAgICAgICA/ICcnXG4gICAgICAgICAgICAgICAgICAgIDogYCBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC01IG1sLWF1dG8gZ2VucmVzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tb3V0bGluZS1saWdodCB0cmFpbGVyLWJ0blwiIG9uY2xpY2s9XCJvcGVuVmlkZW8oKVwiPlRyYWlsZXI8L2J1dHRvbj4gXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTEyIG14LWF1dG8gdmlkZW8tY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIHNyYz1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLyR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFNlcmllSWRSZXMudmlkZW9zLnJlc3VsdHNbMF0ua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICB9P2VuYWJsZWpzYXBpPTEmZnM9MCZpdl9sb2FkX3BvbGljeT0zJnJlbD0wJnNob3dpbmZvPTBcIiBpZD1cInRyYWlsZXItcGxheWVyXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuIGNsYXNzPVwidmlkZW9cIj48L2lmcmFtZT4gXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PiBgXG4gICAgICAgICAgICAgICAgfSAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgJHtcbiAgICAgICAgICAgICAgICAgIHNlYXJjaFNlcmllSWRSZXMuc2ltaWxhci5yZXN1bHRzIDwgMVxuICAgICAgICAgICAgICAgICAgICA/ICcnXG4gICAgICAgICAgICAgICAgICAgIDogYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibXgtYXV0byBjb2wtbWQtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWxpZ2h0IHNpbWlsYXItYnRuXCIgb25jbGljaz1cInVpLm9wZW5TaW1pbGFyKClcIj4gU2ltaWxhcjwvYnV0dG9uPiBcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWQgY2Fyb3VzZWwtY29udGFpbmVyXCIgb25jbGljaz1cInByaW50U2ltaWxhcihldmVudClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmludC1zbGlja1wiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lcicpLmlubmVySFRNTCA9IG91dHB1dDtcblxuICAgIC8vIHNldCBiYWNrZ3JvdW5kIGluIENTU1xuICAgIGNvbnN0IG1vZGFsQmdTID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm15TW9kYWwnKTtcbiAgICBtb2RhbEJnUy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCByZ2JhKDAsMCwwLDEpIDAlLHJnYmEoMCwwLDAsMSkgMTUlLHJnYmEoMjU1LDI1NSwyNTUsLjE1KSAxNSUscmdiYSgwLDAsMCwwKSA0MCUscmdiYSgwLDAsMCwwLjc1KSA0MCUscmdiYSgwLDAsMCwwLjc1KSAxMDAlKSwgdXJsKGh0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3cxMjgwLyR7YkRyb3B9KWA7XG5cbiAgICAvLyBUZWxsIHlvdXR1YmUgQVBJIHRvIGxvYWQgcGxheWVyXG4gICAgbG9hZFlUcGxheWVyKCk7XG4gIH1cblxuICAvLyEgU0lNSUxBUlxuICBwcmludFNpbWlsYXJNb3ZpZXMoc2VhcmNoTW92aWVJZFJlcykge1xuICAgIGxldCBwb3N0ZXIgPSAnJztcbiAgICBzZWFyY2hNb3ZpZUlkUmVzLm1vdmllRGV0YWlsc0luZm8uc2ltaWxhci5yZXN1bHRzLmZvckVhY2gobW92aWUgPT4ge1xuICAgICAgcG9zdGVyICs9IGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xpY2staXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3cxNTQvJHtcbiAgICAgICAgICAgICAgICAgICAgICBtb3ZpZS5wb3N0ZXJfcGF0aFxuICAgICAgICAgICAgICAgICAgICB9XCIgIGlkPVwiJHttb3ZpZS5pZH1cIiBkYXRhLWlkPVwibW92aWVcIiBhbHQ9XCJTaW1pbGFyXCI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByaW50LXNsaWNrJykuaW5uZXJIVE1MID0gcG9zdGVyO1xuICB9XG5cbiAgcHJpbnRTaW1pbGFyU2VyaWVzKHNlYXJjaFNlcmllSWRSZXMpIHtcbiAgICBsZXQgcG9zdGVyID0gJyc7XG4gICAgc2VhcmNoU2VyaWVJZFJlcy5zaW1pbGFyLnJlc3VsdHMuZm9yRWFjaChzZXJpZSA9PiB7XG4gICAgICBwb3N0ZXIgKz0gYFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGljay1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZS50bWRiLm9yZy90L3AvdzE1NC8ke1xuICAgICAgICAgICAgICAgICAgICAgIHNlcmllLnBvc3Rlcl9wYXRoXG4gICAgICAgICAgICAgICAgICAgIH1cIiAgaWQ9XCIke3NlcmllLmlkfVwiIGRhdGEtaWQ9XCJzZXJpZVwiIGFsdD1cIlNpbWlsYXJcIj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJpbnQtc2xpY2snKS5pbm5lckhUTUwgPSBwb3N0ZXI7XG4gIH1cblxuICBvcGVuU2ltaWxhcigpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2ltaWxhci1idG4nKS5jbGFzc0xpc3QudG9nZ2xlKCdzbS1idG4tYWN0aXZlJyk7XG4gICAgZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWwtY29udGFpbmVyJylcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKCdjYXItY29udC1hY3RpdmUnKTtcbiAgfVxuXG4gIC8vISBDTE9TRSBNT0RBTFxuICBjbGVhck1vZGFsKCkge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm15TW9kYWwnKTtcbiAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlby1jb250YWluZXInKTtcbiAgICBjb25zdCBhY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rvck1vZGFsJyk7XG5cbiAgICBpZiAodmlkZW8gJiYgdmlkZW8uc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJykge1xuICAgICAgdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIHBsYXllci5zdG9wVmlkZW8oKTtcbiAgICB9IGVsc2UgaWYgKGFjdG9yKSB7XG4gICAgICBhY3Rvci5yZW1vdmUoKTtcbiAgICB9IGVsc2UgaWYgKG1vZGFsKSB7XG4gICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgIC8vc2V0IGJhY2sgdG8gYXV0b1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xuICAgIH1cbiAgfVxuXG4gIC8vISBOQVZCQVIgU0VDVElPTlxuICBjbGVhcklucHV0KCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmxpbmVGb3JtSW5wdXRHcm91cCcpLnZhbHVlID0gJyc7XG4gIH1cblxuICBub01vdmllRm91bmQoKSB7XG4gICAgLy9jbGVhciByZXN1bHRzXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQnKS5pbm5lckhUTUwgPSAnJztcblxuICAgIC8vcHJpbnQgbWVzc2FnZVxuICAgIGxldCBvdXRwdXQgPSAnJztcblxuICAgIG91dHB1dCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXIgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibm8tbW92aWUtZm91bmRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgyPldvcHMhIFdlIGNvdWxkbid0IGZpbmQgdGhhdCEgVHJ5IGFub3RoZXIgb25lISA6KTwvaDI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9tZWRpYS5naXBoeS5jb20vbWVkaWEvMzIzVzlqR0lzRHpVRlV1T3RkL2dpcGh5LmdpZlwiPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZCcpLmlubmVySFRNTCA9IG91dHB1dDtcbiAgfVxuXG4gIGFjdGl2ZUxpbmsoZSkge1xuICAgIGNvbnN0IG1vdmllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb3ZpZXMnKTtcbiAgICBjb25zdCBzZXJpZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VyaWVzJyk7XG4gICAgY29uc3QgY2xpY2tlZCA9IGUudGFyZ2V0LmlkO1xuXG4gICAgLy8gaWYgbW92aWVzIGlzIGNsaWNrZWQgYWRkIGNsYXNzIGFuZCByZW1vdmUgZnJvbSBzZXJpZXNcbiAgICBpZiAoY2xpY2tlZCA9PT0gJ21vdmllcycpIHtcbiAgICAgIHNlcmllcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtbGluaycpO1xuICAgICAgbW92aWVzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1saW5rJyk7XG5cbiAgICAgIC8vZWxzZSBhZGQgY2xhc3MgdG8gc2VyaWVzIGFuZCByZW1vdmUgZnJvbSBtb3ZpZXNcbiAgICB9IGVsc2UgaWYgKGNsaWNrZWQgPT09ICdzZXJpZXMnKSB7XG4gICAgICBtb3ZpZXMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLWxpbmsnKTtcbiAgICAgIHNlcmllcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtbGluaycpO1xuICAgIH1cbiAgfVxuXG4gIC8vISBQUklOVCBCWSBHRU5SRVxuICBwcmludE1vdmllR2VucmVzKGdlbnJlTGlzdE1vdmllc1Jlcykge1xuICAgIGNvbnN0IG1vdmllR2VucmUgPSBnZW5yZUxpc3RNb3ZpZXNSZXMuZ2VucmVzO1xuICAgIGxldCBvdXRwdXQgPSAnJztcblxuICAgIG1vdmllR2VucmUuZm9yRWFjaChnZW5yZSA9PiB7XG4gICAgICBjb25zdCBpZCA9IGdlbnJlLmlkO1xuICAgICAgY29uc3QgbmFtZSA9IGdlbnJlLm5hbWU7XG5cbiAgICAgIG91dHB1dCArPSBgXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgZGF0YS1nZW5yZT1cIiR7aWR9XCIgaHJlZj1cIiNcIj4ke25hbWV9PC9hPlxuICAgICAgICAgICAgYDtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1tZW51JykuaW5uZXJIVE1MID0gb3V0cHV0O1xuICAgIH0pO1xuICB9XG5cbiAgcHJpbnRTZXJpZXNHZW5yZXMoZ2VucmVMaXN0U2VyaWVzUmVzKSB7XG4gICAgY29uc3Qgc2VyaWVHZW5yZSA9IGdlbnJlTGlzdFNlcmllc1Jlcy5nZW5yZXM7XG4gICAgbGV0IG91dHB1dCA9ICcnO1xuXG4gICAgc2VyaWVHZW5yZS5mb3JFYWNoKGdlbnJlID0+IHtcbiAgICAgIGNvbnN0IGlkID0gZ2VucmUuaWQ7XG4gICAgICBjb25zdCBuYW1lID0gZ2VucmUubmFtZTtcblxuICAgICAgb3V0cHV0ICs9IGBcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBkYXRhLWdlbnJlPVwiJHtpZH1cIiBocmVmPVwiI1wiPiR7bmFtZX08L2E+XG4gICAgICAgICAgICBgO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLW1lbnUnKS5pbm5lckhUTUwgPSBvdXRwdXQ7XG4gICAgfSk7XG4gIH1cblxuICBwcmludE1vdmllQnlHZW5yZShtb3ZpZUdlbnJlUmVzKSB7XG4gICAgbGV0IG91dHB1dCA9ICcnO1xuXG4gICAgY29uc3QgbW92aWVHZW5yZSA9IG1vdmllR2VucmVSZXMucmVzdWx0cztcbiAgICBjb25zdCBmaWx0ZXJlZE1vdmllcyA9IG1vdmllR2VucmUucmVkdWNlKFxuICAgICAgKGFjYywgbW92aWUpID0+IHtcbiAgICAgICAgaWYgKG1vdmllLnBvc3Rlcl9wYXRoID09IG51bGwpIHtcbiAgICAgICAgICBtb3ZpZS5yZWplY3Rpb25SZWFzb24gPSAnbm8gcGhvdG8nO1xuICAgICAgICAgIGFjYy5yZWplY3RzLnB1c2gobW92aWUpO1xuICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vdmllLnBvcHVsYXJpdHkgPCA0KSB7XG4gICAgICAgICAgbW92aWUucmVqZWN0aW9uUmVhc29uID0gJ2JhZCByYXRpbmcnO1xuICAgICAgICAgIGFjYy5yZWplY3RzLnB1c2gobW92aWUpO1xuICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH1cbiAgICAgICAgYWNjLm1hdGNoZXMucHVzaChtb3ZpZSk7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LFxuICAgICAgeyBtYXRjaGVzOiBbXSwgcmVqZWN0czogW10gfVxuICAgICk7XG5cbiAgICBmaWx0ZXJlZE1vdmllcy5tYXRjaGVzLmZvckVhY2gobW92aWUgPT4ge1xuICAgICAgbGV0IGltZyA9IG1vdmllLnBvc3Rlcl9wYXRoO1xuICAgICAgY29uc3QgdGl0bGUgPSBtb3ZpZS5vcmlnaW5hbF90aXRsZTtcbiAgICAgIGNvbnN0IGRhdGUgPSBtb3ZpZS5yZWxlYXNlX2RhdGUuc3Vic3RyaW5nKDAsIDQpO1xuICAgICAgY29uc3Qgdm90ZXMgPSBtb3ZpZS52b3RlX2F2ZXJhZ2U7XG4gICAgICBjb25zdCBpZCA9IG1vdmllLmlkO1xuXG4gICAgICBvdXRwdXQgPSBgXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZC1pdGVtIGNvbC02IGNvbC1zbS00IGNvbC1tZC0zIGNvbC1sZy0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQtaXRlbS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZS50bWRiLm9yZy90L3AvdzUwMC8ke2ltZ31cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cIiR7aWR9XCIgY2xhc3M9XCJvdmVybGF5XCIgZGF0YS1pZD1cIm1vdmllXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJnYWxsLXRleHQgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBpZD1cIiR7aWR9XCIgY2xhc3M9XCJjb250ZW50LXRpdGxlXCIgZGF0YS1pZD1cIm1vdmllXCI+JHt0aXRsZX08L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCIke2lkfVwiIGRhdGEtaWQ9XCJtb3ZpZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWhlYXJ0IGZhLXNtXCI+PC9pPiAke3ZvdGVzfSBoZWFydHM8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxicj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiJHtpZH1cIiBkYXRhLWlkPVwibW92aWVcIj4ke2RhdGV9PC9zcGFuPiAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBgO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQnKS5pbm5lckhUTUwgKz0gb3V0cHV0O1xuICAgIH0pO1xuICB9XG5cbiAgcHJpbnRTZXJpZXNCeUdlbnJlcyhzZXJpZUdlbnJlUmVzKSB7XG4gICAgbGV0IG91dHB1dCA9ICcnO1xuXG4gICAgY29uc3Qgc2VyaWVzR2VucmUgPSBzZXJpZUdlbnJlUmVzLnJlc3VsdHM7XG4gICAgY29uc3QgZmlsdGVyZWRTZXJpZXMgPSBzZXJpZXNHZW5yZS5yZWR1Y2UoXG4gICAgICAoYWNjLCBzZXJpZSkgPT4ge1xuICAgICAgICBpZiAoc2VyaWUucG9zdGVyX3BhdGggPT0gbnVsbCkge1xuICAgICAgICAgIHNlcmllLnJlamVjdGlvblJlYXNvbiA9ICdubyBwaG90byc7XG4gICAgICAgICAgYWNjLnJlamVjdHMucHVzaChzZXJpZSk7XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VyaWUucG9wdWxhcml0eSA8IDQpIHtcbiAgICAgICAgICBzZXJpZS5yZWplY3Rpb25SZWFzb24gPSAnYmFkIHJhdGluZyc7XG4gICAgICAgICAgYWNjLnJlamVjdHMucHVzaChzZXJpZSk7XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfVxuICAgICAgICBhY2MubWF0Y2hlcy5wdXNoKHNlcmllKTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sXG4gICAgICB7IG1hdGNoZXM6IFtdLCByZWplY3RzOiBbXSB9XG4gICAgKTtcblxuICAgIGZpbHRlcmVkU2VyaWVzLm1hdGNoZXMuZm9yRWFjaChzZXJpZSA9PiB7XG4gICAgICBsZXQgaW1nID0gc2VyaWUucG9zdGVyX3BhdGg7XG4gICAgICBjb25zdCBuYW1lID0gc2VyaWUubmFtZTtcbiAgICAgIGNvbnN0IGRhdGUgPSBzZXJpZS5maXJzdF9haXJfZGF0ZS5zdWJzdHJpbmcoMCwgNCk7XG4gICAgICBjb25zdCB2b3RlcyA9IHNlcmllLnZvdGVfYXZlcmFnZTtcbiAgICAgIGNvbnN0IGlkID0gc2VyaWUuaWQ7XG5cbiAgICAgIG91dHB1dCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQtaXRlbSBjb2wtNiBjb2wtc20tNCBjb2wtbWQtMyBjb2wtbGctMlwiIGlkPVwiZ2VucmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncmlkLWl0ZW0tY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZS50bWRiLm9yZy90L3AvdzUwMC8ke2ltZ31cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiJHtpZH1cIiBjbGFzcz1cIm92ZXJsYXlcIiBkYXRhLWlkPVwic2VyaWVcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdhbGwtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGlkPVwiJHtpZH1cIiBjbGFzcz1cImNvbnRlbnQtdGl0bGVcIiBkYXRhLWlkPVwic2VyaWVcIj4ke25hbWV9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiJHtpZH1cIiBkYXRhLWlkPVwic2VyaWVcIj48aSBjbGFzcz1cImZhcyBmYS1oZWFydCBmYS1zbVwiPjwvaT4gJHt2b3Rlc30gaGVhcnRzPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cIiR7aWR9XCIgZGF0YS1pZD1cInNlcmllXCI+JHtkYXRlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgYDtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkJykuaW5uZXJIVE1MICs9IG91dHB1dDtcbiAgICB9KTtcbiAgfVxuXG4gIC8vISBBQ1RPUlMgUEFHRVxuXG4gIHByaW50QWN0b3IoZ2V0QWN0b3JSZXMpIHtcbiAgICBjb25zb2xlLmxvZyhnZXRBY3RvclJlcyk7XG4gICAgLy8gc3BsaXQgaW50byBtb3ZpZXMgYW5kIHNlcmllcyBhcnJheVxuICAgIGNvbnN0IGZpbHRlcmVkQ3JlZGl0cyA9IGdldEFjdG9yUmVzLmNvbWJpbmVkX2NyZWRpdHMuY2FzdC5yZWR1Y2UoXG4gICAgICAoYWNjLCBjcmVkaXQpID0+IHtcbiAgICAgICAgaWYgKGNyZWRpdC5tZWRpYV90eXBlID09ICd0dicpIHtcbiAgICAgICAgICBhY2Muc2VyaWVzLnB1c2goY3JlZGl0KTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGFjYy5tb3ZpZXMucHVzaChjcmVkaXQpO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHsgbW92aWVzOiBbXSwgc2VyaWVzOiBbXSB9XG4gICAgKTtcblxuICAgIC8vIHByaW50IGVhY2ggY3JlZGl0IGZvciBtb3ZpZVxuICAgIGxldCBtb3ZpZUNyZWRpdCA9ICcnO1xuICAgIGZpbHRlcmVkQ3JlZGl0cy5tb3ZpZXMuZm9yRWFjaChjcmVkaXRzID0+IHtcbiAgICAgIGNvbnN0IHRpdGxlID0gY3JlZGl0cy50aXRsZSxcbiAgICAgICAgeWVhciA9IGNyZWRpdHMucmVsZWFzZV9kYXRlLFxuICAgICAgICBpZCA9IGNyZWRpdHMuaWQsXG4gICAgICAgIHJvbGUgPSBjcmVkaXRzLmNoYXJhY3RlcjtcblxuICAgICAgLy9pZiBubyB5ZWFyIG4vYSBhbHNvIGtlZXAgb25seSB5ZWFyIGZyb20gZGF0ZVxuICAgICAgY29uc3QgeWVhcnMgPSB5ZWFyID8geWVhci5zdWJzdHJpbmcoMCwgNCkgOiAnbi9hJztcblxuICAgICAgbW92aWVDcmVkaXQgKz0gYFxuICAgICAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGNyZWRpdCBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjci10aXRsZVwiPiR7dGl0bGV9PGJyPjxzcGFuIGNsYXNzPVwicm9sZVwiPiR7cm9sZX08L3NwYW4+PC9zcGFuPiBcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLWxpZ2h0IGJhZGdlLXBpbGwgYmFkZ2UteWVhclwiPiR7eWVhcnN9PC9zcGFuPlxuICAgICAgICAgICAgPC9saT4gICAgXG4gICAgICAgICAgICBgO1xuICAgIH0pO1xuXG4gICAgLy8gcHJpbnQgZWFjaCBjcmVkaXQgZm9yIHNlcmllXG4gICAgbGV0IHNlcmllQ3JlZGl0ID0gJyc7XG4gICAgZmlsdGVyZWRDcmVkaXRzLnNlcmllcy5mb3JFYWNoKGNyZWRpdHMgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IGNyZWRpdHMubmFtZSxcbiAgICAgICAgZGF0ZSA9IGNyZWRpdHMuZmlyc3RfYWlyX2RhdGUuc3Vic3RyaW5nKDAsIDQpLFxuICAgICAgICBpZCA9IGNyZWRpdHMuaWQsXG4gICAgICAgIHJvbGUgPSBjcmVkaXRzLmNoYXJhY3RlcjtcblxuICAgICAgc2VyaWVDcmVkaXQgKz0gYFxuICAgICAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGNyZWRpdCBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjci10aXRsZVwiPiR7bmFtZX08YnI+PHNwYW4gY2xhc3M9XCJyb2xlXCI+JHtyb2xlfTwvc3Bhbj48L3NwYW4+IFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2UtbGlnaHQgYmFkZ2UtcGlsbFwiPiR7ZGF0ZX08L3NwYW4+XG4gICAgICAgICAgICA8L2xpPiAgICBcbiAgICAgICAgICAgIGA7XG4gICAgfSk7XG5cbiAgICAvL2RvbnQgcHJldmVudCBzY3JvbGxpbmcgdW5kZXIgdGhlIG1vZGFsXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lcicpLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XG5cbiAgICBjb25zdCBiaW8gPSBnZXRBY3RvclJlcy5iaW9ncmFwaHksXG4gICAgICBiRGF5ID0gZ2V0QWN0b3JSZXMuYmlydGhkYXksXG4gICAgICBuYW1lID0gZ2V0QWN0b3JSZXMubmFtZSxcbiAgICAgIGhUb3duID0gZ2V0QWN0b3JSZXMucGxhY2Vfb2ZfYmlydGgsXG4gICAgICBwaWMgPSBnZXRBY3RvclJlcy5wcm9maWxlX3BhdGg7XG5cbiAgICAvLyByZXZlcnNlIGRhdGUgdG8gRVUgc3R5bGUgYW5kIGNoZWNrIGlmIGV4aXN0c1xuICAgIGNvbnN0IGRvYiA9IGJEYXlcbiAgICAgID8gYkRheVxuICAgICAgICAgIC5zcGxpdCgnLScpXG4gICAgICAgICAgLnJldmVyc2UoKVxuICAgICAgICAgIC5qb2luKCctJylcbiAgICAgIDogJ24vYSc7XG5cbiAgICAvL2dldCBhY3RvcidzIHNvY2lhbCBsaW5rc1xuICAgIGxldCBzb2NpYWxzID0gJyc7XG4gICAgY29uc3Qgc29jaWFsID0gZ2V0QWN0b3JSZXMuZXh0ZXJuYWxfaWRzO1xuICAgIGNvbnN0IHNvY2lhbExpbmtzID0gW107XG4gICAgc29jaWFsTGlua3MucHVzaChzb2NpYWwpO1xuXG4gICAgc29jaWFsTGlua3MuZm9yRWFjaChsaW5rID0+IHtcbiAgICAgIGxldCBmYiA9IGxpbmsuZmFjZWJvb2tfaWQ7XG4gICAgICBsZXQgaW5zdGEgPSBsaW5rLmluc3RhZ3JhbV9pZDtcbiAgICAgIGxldCB0d2l0ID0gbGluay50d2l0dGVyX2lkO1xuICAgICAgbGV0IGltZGIgPSBsaW5rLmltZGJfaWQ7XG5cbiAgICAgIHNvY2lhbHMgKz0gYFxuICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICBmYlxuICAgICAgICAgICAgICAgICAgICA/IGA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLyR7ZmJ9XCI+PGkgY2xhc3M9XCJmYWIgZmEtZmFjZWJvb2stc3F1YXJlXCI+PC9pPjwvYT5gXG4gICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHtcbiAgICAgICAgICAgICAgICAgIGluc3RhXG4gICAgICAgICAgICAgICAgICAgID8gYDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tLyR7aW5zdGF9XCI+PGkgY2xhc3M9XCJmYWIgZmEtaW5zdGFncmFtXCI+PC9pPjwvYT5gXG4gICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHtcbiAgICAgICAgICAgICAgICAgIHR3aXRcbiAgICAgICAgICAgICAgICAgICAgPyBgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHBzOi8vdHdpdHRlci5jb20vJHt0d2l0fVwiPiA8aSBjbGFzcz1cImZhYiBmYS10d2l0dGVyLXNxdWFyZVwiPjwvaT48L2E+YFxuICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICBpbWRiXG4gICAgICAgICAgICAgICAgICAgID8gYDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwczovL3d3dy5pbWRiLmNvbS9uYW1lLyR7aW1kYn1cIj48aSBjbGFzcz1cImZhYiBmYS1pbWRiXCI+PC9pPjwvYT5gXG4gICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgIH0pO1xuXG4gICAgLy8gZ2V0IGFjdG9yJ3MgZ2FsbGVyeSBwaWN0dXJlc1xuICAgIGxldCBwaWN0dXJlcyA9ICcnO1xuICAgIGNvbnN0IGdhbGxlcnkgPSBnZXRBY3RvclJlcy5pbWFnZXMucHJvZmlsZXM7XG4gICAgZ2FsbGVyeS5mb3JFYWNoKHBpY3R1cmUgPT4ge1xuICAgICAgY29uc3QgcGljcyA9IHBpY3R1cmUuZmlsZV9wYXRoO1xuICAgICAgcGljdHVyZXMgKz0gYFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbGctMiBmb3RvLWdhbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJwb3B1cC1waWNcIiBocmVmPVwiaHR0cHM6Ly9pbWFnZS50bWRiLm9yZy90L3Avdzc4MC8ke3BpY3N9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiZ2FsbGVyeS1hY3RvclwiIHNyYz1cImh0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3czNDIvJHtwaWNzfVwiPlxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgO1xuICAgIH0pO1xuXG4gICAgLy9waWMgYW5kIHBsYWNlaG9sZGVyIGh0bWwgZm9yIHRlcm5lcnlcbiAgICBsZXQgYWN0b3JQaWMgPSBgPGltZyBjbGFzcz1cIm1haW4tcGljXCIgc3JjPVwiaHR0cHM6Ly9pbWFnZS50bWRiLm9yZy90L3Avdzc4MC8ke3BpY31cIj5gO1xuICAgIGxldCBwbGFjZUhvbGQgPSBgPGltZyBjbGFzcz1cIm1haW4tcGljXCIgc3JjPVwiYXNzZXRzL21lZGlhL2ltYWdlcy9wb3Bjb3JuLnBuZ1wiPmA7XG5cbiAgICBsZXQgb3V0cHV0ID0gJyc7XG5cbiAgICBvdXRwdXQgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWN0b3JNb2RhbFwiPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFyIGZhLXRpbWVzLWNpcmNsZVwiIGlkPVwiY2xvc2UtbW9kYWxcIiBvbmNsaWNrPVwiY2xvc2VNb2RhbCgpXCI+PC9pPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMiB0aXRsZSBmbGV4LWNvbFwiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwibW9kYWwtdGl0bGVcIj4ke25hbWV9IDwvaDI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0PjxzcGFuPiBET0I6IDwvc3Bhbj4ke2RvYn0gPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0PiAgPHNwYW4+IFBPQjogPC9zcGFuPiAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoVG93biAhPSB1bmRlZmluZWQgPyBoVG93biA6ICduL2EnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgYWN0b3ItcGljXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtwaWMgPyBhY3RvclBpYyA6IHBsYWNlSG9sZH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNvY2lhbC1pY29uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3NvY2lhbHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5HYWxsZXJ5PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBnYWxsZXJ5LW1haW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cGljdHVyZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiYmlvXCI+PHNwYW4+T3ZlcnZpZXc6PC9zcGFuPiAke2Jpb308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gZXhwYW5kLWJ0blwiIG9uY2xpY2s9XCJleHBhbmQoKVwiPiBPcGVuPC9idXR0b24+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5Nb3ZpZXM8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImxpc3QtZ3JvdXAgY3JlZGl0c1wiPiR7bW92aWVDcmVkaXR9PC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRDcmVkaXRzLnNlcmllcy5sZW5ndGggPCAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5TZXJpZXM8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImxpc3QtZ3JvdXAgY3JlZGl0c1wiPiR7c2VyaWVDcmVkaXR9PC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdG9yLW1vZGFsLWNvbnRhaW5lcicpLmlubmVySFRNTCA9IG91dHB1dDtcblxuICAgIC8vIHNldCBiYWNrZ3JvdW5kIGluIENTU1xuICAgIGNvbnN0IGFjdG9yQmdTID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdG9yTW9kYWwnKTtcblxuICAgIC8vIGlmIHBpYyBpcyBub3QgcHJlc2VudCB1c2UgcGxhY2Vob2xkZXJcbiAgICAvLyBpZiAocGljKSB7XG4gICAgLy8gICAgIGFjdG9yQmdTLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHJnYmEoMCwwLDAsMCkgMCUscmdiYSgwLDAsMCwwKSAyMSUscmdiYSgwLDAsMCwxKSA0MCUscmdiYSgwLDAsMCwxKSAxMDAlKSwgdXJsKGh0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3c3ODAvJHtwaWN9KWA7XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgICAgYWN0b3JCZ1Muc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSgwLDAsMCwwKSAwJSxyZ2JhKDAsMCwwLDApIDIxJSxyZ2JhKDAsMCwwLDEpIDQwJSxyZ2JhKDAsMCwwLDEpIDEwMCUpLCB1cmwoL2Fzc2V0cy9tZWRpYS9pbWFnZXMvcG9wY29ybi5wbmcpYDtcbiAgICAvLyB9O1xuICB9XG59XG5cbi8vISBJTVBPUlRBTlRcblxuLy9UT0RPIC8vLy8vIGZpeCBnZW5yZSBwYWdpbmF0aW9uXG5cbi8vIFRPRE8gLy8vIFJFU1BPTlNJVkVcbiJdfQ==
